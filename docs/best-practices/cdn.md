---
title: "Orientación sobre Content Delivery Network"
description: "Orientación sobre Content Delivery Network (CDN) para entregar contenido de alto ancho de banda hospedado en Azure."
author: dragon119
ms.date: 09/30/2016
pnp.series.title: Best Practices
ms.openlocfilehash: 94036c803552d5e7061f99e6dd0ca9e563a32690
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/14/2017
---
# <a name="content-delivery-network"></a><span data-ttu-id="3a39b-103">Content Delivery Network</span><span class="sxs-lookup"><span data-stu-id="3a39b-103">Content Delivery Network</span></span>
[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="3a39b-104">Microsoft Azure Content Delivery Network (CDN) ofrece a los desarrolladores una solución global para entregar contenido con alto ancho de banda que se hospeda en Azure o en cualquier otra ubicación.</span><span class="sxs-lookup"><span data-stu-id="3a39b-104">The Microsoft Azure Content Delivery Network (CDN) offers developers a global solution for delivering high-bandwidth content that is hosted in Azure or any other location.</span></span> <span data-ttu-id="3a39b-105">Con la red CDN, puede almacenar en caché objetos disponibles públicamente cargados desde Almacenamiento de blobs de Azure, una aplicación web, una máquina virtual, una carpeta de la aplicación u otra ubicación HTTP/HTTPS.</span><span class="sxs-lookup"><span data-stu-id="3a39b-105">Using the CDN, you can cache publicly available objects loaded from Azure blob storage, a web application, virtual machine, application folder, or other HTTP/HTTPS location.</span></span> <span data-ttu-id="3a39b-106">La caché de CDN puede mantenerse en ubicaciones estratégicas, con el fin de proporcionar el ancho de banda máximo para entregar contenido a los usuarios.</span><span class="sxs-lookup"><span data-stu-id="3a39b-106">The CDN cache can be held at strategic locations to provide maximum bandwidth for delivering content to users.</span></span> <span data-ttu-id="3a39b-107">La red CDN se suele usar para entregar el contenido estático, como imágenes, hojas de estilo, documentos, archivos, scripts de cliente y páginas HTML.</span><span class="sxs-lookup"><span data-stu-id="3a39b-107">The CDN is typically used for delivering static content such as images, style sheets, documents, files, client-side scripts, and HTML pages.</span></span>

<span data-ttu-id="3a39b-108">La red CDN también se puede usar como una memoria caché para servir contenido dinámico, como un informe en PDF o un gráfico basados en las entradas especificadas; si diferentes usuarios proporcionan los mismos valores de entrada, el resultado debería ser el mismo.</span><span class="sxs-lookup"><span data-stu-id="3a39b-108">You can also use the CDN as a cache for serving dynamic content, such as a PDF report or graph based on specified inputs; if the same input values are provided by different users the result should be the same.</span></span>

<span data-ttu-id="3a39b-109">Las principales ventajas de usar la red CDN son una menor latencia y una entrega de contenido más rápida a los usuarios, independientemente de su ubicación geográfica en relación con el centro de datos en que se hospeda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="3a39b-109">The major advantages of using the CDN are lower latency and faster delivery of content to users irrespective of their geographical location in relation to the datacenter where the application is hosted.</span></span>  

![Diagrama de la red CDN](./images/cdn/CDN.png)

<span data-ttu-id="3a39b-111">El uso de CDN también ayudará a reducir la carga de la aplicación, ya que se alivia el procesamiento requerido para acceder al contenido y entregarlo.</span><span class="sxs-lookup"><span data-stu-id="3a39b-111">Using the CDN should also help to reduce the load on application because it is relieved of the processing required to access and deliver the content.</span></span> <span data-ttu-id="3a39b-112">Esta reducción puede ayudar a mejorar el rendimiento y la escalabilidad de la aplicación, así como a minimizar los costos de hospedaje, ya que se reducen los recursos de procesamiento requeridos para lograr un nivel concreto de disponibilidad y rendimiento.</span><span class="sxs-lookup"><span data-stu-id="3a39b-112">This reduction in load can help to increase the performance and scalability of the application, as well as minimizing hosting costs by reducing the processing resources required to achieve a specific level of performance and availability.</span></span>

## <a name="how-and-why-a-cdn-is-used"></a><span data-ttu-id="3a39b-113">Cómo y por qué se usa una red CDN</span><span class="sxs-lookup"><span data-stu-id="3a39b-113">How and why a CDN is used</span></span>
<span data-ttu-id="3a39b-114">Entre los usos típicos de la red CDN se incluyen:</span><span class="sxs-lookup"><span data-stu-id="3a39b-114">Typical uses for a CDN include:</span></span>  

* <span data-ttu-id="3a39b-115">La entrega de recursos estáticos para aplicaciones cliente, a menudo desde un sitio web.</span><span class="sxs-lookup"><span data-stu-id="3a39b-115">Delivering static resources for client applications, often from a website.</span></span> <span data-ttu-id="3a39b-116">Dichos recursos pueden ser imágenes, hojas de estilo, documentos, archivos, scripts de cliente, páginas HTML, fragmentos de HTML o cualquier otro contenido que el servidor no necesite modificar para cada solicitud.</span><span class="sxs-lookup"><span data-stu-id="3a39b-116">These resources can be images, style sheets, documents, files, client-side scripts, HTML pages, HTML fragments, or any other content that the server does not need to modify for each request.</span></span> <span data-ttu-id="3a39b-117">La aplicación puede crear elementos en tiempo de ejecución y ponerlos a disposición de la red CDN (por ejemplo, mediante la creación de una lista de los titulares más recientes), pero no lo hace para cada solicitud.</span><span class="sxs-lookup"><span data-stu-id="3a39b-117">The application can create items at runtime and make them available to the CDN (for example, by creating a list of current news headlines), but it does not do so for each request.</span></span>
* <span data-ttu-id="3a39b-118">Entrega de contenido compartido y estático público a dispositivos como teléfonos móviles y Tablet PC.</span><span class="sxs-lookup"><span data-stu-id="3a39b-118">Delivering public static and shared content to devices such as mobile phones and tablet computers.</span></span> <span data-ttu-id="3a39b-119">La propia aplicación es un servicio web que ofrece una API a los clientes que se ejecutan en los distintos dispositivos.</span><span class="sxs-lookup"><span data-stu-id="3a39b-119">The application itself is a web service that offers an API to clients running on the various devices.</span></span> <span data-ttu-id="3a39b-120">La red CDN también puede ofrecer conjuntos de datos estáticos (mediante el servicio web) para que los clientes los usen, quizás para generar la interfaz de usuario del cliente.</span><span class="sxs-lookup"><span data-stu-id="3a39b-120">The CDN can also deliver static datasets (via the web service) for the clients to use, perhaps to generate the client UI.</span></span> <span data-ttu-id="3a39b-121">Por ejemplo, la red CDN se puede usar para distribuir documentos JSON o XML.</span><span class="sxs-lookup"><span data-stu-id="3a39b-121">For example, the CDN could be used to distribute JSON or XML documents.</span></span>
* <span data-ttu-id="3a39b-122">La prestación de servicio de sitios web completos que constan únicamente de contenido público estático que se entrega a los clientes, sin necesidad de disponer de recursos de proceso dedicados.</span><span class="sxs-lookup"><span data-stu-id="3a39b-122">Serving entire websites that consist of only public static content to clients, without requiring any dedicated compute resources.</span></span>
* <span data-ttu-id="3a39b-123">El streaming de archivos de vídeo en el cliente a petición.</span><span class="sxs-lookup"><span data-stu-id="3a39b-123">Streaming video files to the client on demand.</span></span> <span data-ttu-id="3a39b-124">El vídeo aprovecha la latencia baja y una conectividad confiable disponible en los centros de datos distribuidos en todo el mundo que ofrecen conexiones de red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-124">Video benefits from the low latency and reliable connectivity available from the globally located datacenters that offer CDN connections.</span></span> <span data-ttu-id="3a39b-125">Microsoft Azure Media Services (AMS) se integra con Azure CDN para entregar contenido directamente a la red CDN para su distribución posterior.</span><span class="sxs-lookup"><span data-stu-id="3a39b-125">Microsoft Azure Media Services (AMS) integrates with Azure CDN to deliver content directly to the CDN for further distribution.</span></span> <span data-ttu-id="3a39b-126">Para obtener más información, consulte [Streaming endpoints overview](/azure/media-services/media-services-streaming-endpoints-overview) (Información general de puntos de conexión de streaming).</span><span class="sxs-lookup"><span data-stu-id="3a39b-126">For more information, see [Streaming endpoints overview](/azure/media-services/media-services-streaming-endpoints-overview).</span></span>
* <span data-ttu-id="3a39b-127">Por lo general, esto mejora la experiencia de los usuarios, sobre todo la de los que están lejos del centro de datos que hospeda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="3a39b-127">Generally improving the experience for users, especially those located far from the datacenter hosting the application.</span></span> <span data-ttu-id="3a39b-128">De lo contrario, dichos usuarios podrían sufrir una mayor latencia.</span><span class="sxs-lookup"><span data-stu-id="3a39b-128">These users might otherwise suffer higher latency.</span></span> <span data-ttu-id="3a39b-129">Una gran parte del tamaño total del contenido de una aplicación web suele ser estática y el uso de la red CDN puede ayudar a mantener el rendimiento y la experiencia general del usuario al tiempo que elimina la necesidad de implementar la aplicación en varios centros de datos.</span><span class="sxs-lookup"><span data-stu-id="3a39b-129">A large proportion of the total size of the content in a web application is often static, and using the CDN can help to maintain performance and overall user experience while eliminating the requirement to deploy the application to multiple data centers.</span></span>
* <span data-ttu-id="3a39b-130">Control de la creciente carga de las aplicaciones que admiten soluciones IoT (Internet de las cosas).</span><span class="sxs-lookup"><span data-stu-id="3a39b-130">Handling the growing load on applications that support IoT (Internet of Things) solutions.</span></span> <span data-ttu-id="3a39b-131">La gran cantidad de dichos dispositivos y aparatos implicados podrían sobrepasar fácilmente las capacidades de la aplicación si fuera necesario procesar mensajes de difusión y administrar la distribución de actualizaciones de firmware directamente en cada dispositivo.</span><span class="sxs-lookup"><span data-stu-id="3a39b-131">The huge numbers of such devices and appliances involved could easily overwhelm an application if it was required to process broadcast messages and manage firmware update distribution directly to each device.</span></span>
* <span data-ttu-id="3a39b-132">La capacidad de hacer frente a los picos y aumentos repentinos en la demanda sin que se sea preciso realizar ningún tipo de escalado, lo que evitar el consiguiente aumento de los gastos de mantenimiento.</span><span class="sxs-lookup"><span data-stu-id="3a39b-132">Coping with peaks and surges in demand without requiring the application to scale, avoiding the consequent increased running costs.</span></span> <span data-ttu-id="3a39b-133">Por ejemplo, cuando se publique una actualización del sistema operativo de un dispositivo de hardware (como un modelo específico de enrutador) o de un dispositivo de consumo (por ejemplo, un televisor inteligente), se producirá un importante pico en la demanda, ya que la descargarán millones de usuarios en millones de dispositivos en un breve período de tiempo.</span><span class="sxs-lookup"><span data-stu-id="3a39b-133">For example, when an update to an operating system is released for a hardware device such as a specific model of router, or for a consumer device such as a smart TV, there will be a huge peak in demand as it is downloaded by millions of users and devices over a short period.</span></span>

<span data-ttu-id="3a39b-134">En la lista siguiente se muestran ejemplos del tiempo medio hasta el primer byte desde distintas ubicaciones geográficas.</span><span class="sxs-lookup"><span data-stu-id="3a39b-134">The following list shows examples of the median time to first byte from various geographic locations.</span></span> <span data-ttu-id="3a39b-135">El rol web de destino se implementa en Azure en la zona oeste de EE. UU.</span><span class="sxs-lookup"><span data-stu-id="3a39b-135">The target web role is deployed to Azure West US.</span></span> <span data-ttu-id="3a39b-136">Hay una correlación estrecha entre el mayor aumento debido a la red CDN y su proximidad a un nodo de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-136">There is a strong correlation between greater boost due to the CDN and proximity to a CDN node.</span></span> <span data-ttu-id="3a39b-137">Encontrará una lista completa de las ubicaciones de los nodos de Azure CDN en [Ubicaciones POP de Azure CDN](/azure/cdn/cdn-pop-locations/).</span><span class="sxs-lookup"><span data-stu-id="3a39b-137">A complete list of Azure CDN node locations is available at [Azure Content Delivery Network (CDN) Node Locations](/azure/cdn/cdn-pop-locations/).</span></span>

|  | <span data-ttu-id="3a39b-138">Tiempo (ms) hasta el primer byte (origen)</span><span class="sxs-lookup"><span data-stu-id="3a39b-138">Time (ms) to First Byte (Origin)</span></span> | <span data-ttu-id="3a39b-139">Tiempo (ms) hasta la primera (CDN)</span><span class="sxs-lookup"><span data-stu-id="3a39b-139">Time (ms) to First (CDN)</span></span> | <span data-ttu-id="3a39b-140">% de mejora de tiempo de CDN</span><span class="sxs-lookup"><span data-stu-id="3a39b-140">%CDN time improvement</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="3a39b-141">\*San José, CA</span><span class="sxs-lookup"><span data-stu-id="3a39b-141">\*San Jose, CA</span></span> |<span data-ttu-id="3a39b-142">47,5</span><span class="sxs-lookup"><span data-stu-id="3a39b-142">47.5</span></span> |<span data-ttu-id="3a39b-143">46,5</span><span class="sxs-lookup"><span data-stu-id="3a39b-143">46.5</span></span> |<span data-ttu-id="3a39b-144">2 %</span><span class="sxs-lookup"><span data-stu-id="3a39b-144">2%</span></span> |
| <span data-ttu-id="3a39b-145">\*\*Dulles, VA</span><span class="sxs-lookup"><span data-stu-id="3a39b-145">\*\*Dulles, VA</span></span> |<span data-ttu-id="3a39b-146">109</span><span class="sxs-lookup"><span data-stu-id="3a39b-146">109</span></span> |<span data-ttu-id="3a39b-147">40,5</span><span class="sxs-lookup"><span data-stu-id="3a39b-147">40.5</span></span> |<span data-ttu-id="3a39b-148">169 %</span><span class="sxs-lookup"><span data-stu-id="3a39b-148">169%</span></span> |
| <span data-ttu-id="3a39b-149">Buenos Aires, Argentina</span><span class="sxs-lookup"><span data-stu-id="3a39b-149">Buenos Aires, AR</span></span> |<span data-ttu-id="3a39b-150">210</span><span class="sxs-lookup"><span data-stu-id="3a39b-150">210</span></span> |<span data-ttu-id="3a39b-151">151</span><span class="sxs-lookup"><span data-stu-id="3a39b-151">151</span></span> |<span data-ttu-id="3a39b-152">39 %</span><span class="sxs-lookup"><span data-stu-id="3a39b-152">39%</span></span> |
| <span data-ttu-id="3a39b-153">\*Londres, Reino Unido</span><span class="sxs-lookup"><span data-stu-id="3a39b-153">\*London, UK</span></span> |<span data-ttu-id="3a39b-154">195</span><span class="sxs-lookup"><span data-stu-id="3a39b-154">195</span></span> |<span data-ttu-id="3a39b-155">44</span><span class="sxs-lookup"><span data-stu-id="3a39b-155">44</span></span> |<span data-ttu-id="3a39b-156">343 %</span><span class="sxs-lookup"><span data-stu-id="3a39b-156">343%</span></span> |
| <span data-ttu-id="3a39b-157">Shangai, China</span><span class="sxs-lookup"><span data-stu-id="3a39b-157">Shanghai, CN</span></span> |<span data-ttu-id="3a39b-158">242</span><span class="sxs-lookup"><span data-stu-id="3a39b-158">242</span></span> |<span data-ttu-id="3a39b-159">206</span><span class="sxs-lookup"><span data-stu-id="3a39b-159">206</span></span> |<span data-ttu-id="3a39b-160">17 %</span><span class="sxs-lookup"><span data-stu-id="3a39b-160">17%</span></span> |
| <span data-ttu-id="3a39b-161">\*Singapur</span><span class="sxs-lookup"><span data-stu-id="3a39b-161">\*Singapore</span></span> |<span data-ttu-id="3a39b-162">214</span><span class="sxs-lookup"><span data-stu-id="3a39b-162">214</span></span> |<span data-ttu-id="3a39b-163">74</span><span class="sxs-lookup"><span data-stu-id="3a39b-163">74</span></span> |<span data-ttu-id="3a39b-164">189 %</span><span class="sxs-lookup"><span data-stu-id="3a39b-164">189%</span></span> |
| <span data-ttu-id="3a39b-165">\*Tokio, Japón</span><span class="sxs-lookup"><span data-stu-id="3a39b-165">\*Tokyo, JP</span></span> |<span data-ttu-id="3a39b-166">163</span><span class="sxs-lookup"><span data-stu-id="3a39b-166">163</span></span> |<span data-ttu-id="3a39b-167">48</span><span class="sxs-lookup"><span data-stu-id="3a39b-167">48</span></span> |<span data-ttu-id="3a39b-168">204 %</span><span class="sxs-lookup"><span data-stu-id="3a39b-168">204%</span></span> |
| <span data-ttu-id="3a39b-169">Seúl, Corea del Sur</span><span class="sxs-lookup"><span data-stu-id="3a39b-169">Seoul, KR</span></span> |<span data-ttu-id="3a39b-170">190</span><span class="sxs-lookup"><span data-stu-id="3a39b-170">190</span></span> |<span data-ttu-id="3a39b-171">190</span><span class="sxs-lookup"><span data-stu-id="3a39b-171">190</span></span> |<span data-ttu-id="3a39b-172">0 %</span><span class="sxs-lookup"><span data-stu-id="3a39b-172">0%</span></span> |

<span data-ttu-id="3a39b-173">\* Tiene un nodo de red CDN de Azure en la misma ciudad.</span><span class="sxs-lookup"><span data-stu-id="3a39b-173">\* Has an Azure CDN node in the same city.</span></span>  
<span data-ttu-id="3a39b-174">\*\* Tiene un nodo de red CDN de Azure en una ciudad vecina.</span><span class="sxs-lookup"><span data-stu-id="3a39b-174">\*\* Has an Azure CDN node in a neighboring city.</span></span>  

## <a name="challenges"></a><span data-ttu-id="3a39b-175">Desafíos</span><span class="sxs-lookup"><span data-stu-id="3a39b-175">Challenges</span></span>
<span data-ttu-id="3a39b-176">Hay varios desafíos que se deben tener en cuenta a la hora de usar la red CDN:</span><span class="sxs-lookup"><span data-stu-id="3a39b-176">There are several challenges to take into account when planning to use the CDN:</span></span>  

* <span data-ttu-id="3a39b-177">**Implementación**.</span><span class="sxs-lookup"><span data-stu-id="3a39b-177">**Deployment**.</span></span> <span data-ttu-id="3a39b-178">Decida el origen del que la red CDN obtendrá el contenido y si es preciso implementar el contenido en más de un sistema de almacenamiento (por ejemplo, en la red CDN y en una ubicación alternativa).</span><span class="sxs-lookup"><span data-stu-id="3a39b-178">Decide the origin from which the CDN fetches the content, and whether you need to deploy the content in more than one storage system (such as in the CDN and an alternative location).</span></span>

  <span data-ttu-id="3a39b-179">El mecanismo de implementación de la aplicación debe tener en cuenta este proceso para implementar el contenido estático y los recursos, así como para implementar los archivos de la aplicación, como las páginas ASPX.</span><span class="sxs-lookup"><span data-stu-id="3a39b-179">Your application deployment mechanism must take into account the process for deploying static content and resources as well as deploying the application files, such as ASPX pages.</span></span> <span data-ttu-id="3a39b-180">Por ejemplo, puede que necesite implementar un paso independiente para cargar el contenido en Almacenamiento de blobs de Azure.</span><span class="sxs-lookup"><span data-stu-id="3a39b-180">For example, you may need to implement a separate step to load content into Azure blob storage.</span></span>
* <span data-ttu-id="3a39b-181">**Control de versiones y control de caché**.</span><span class="sxs-lookup"><span data-stu-id="3a39b-181">**Versioning and cache-control**.</span></span> <span data-ttu-id="3a39b-182">Debe tener en cuenta cómo va a actualizar el contenido estático y a implementar las nuevas versiones.</span><span class="sxs-lookup"><span data-stu-id="3a39b-182">Consider how you will update static content and deploy new versions.</span></span> <span data-ttu-id="3a39b-183">Es posible [purgar](/azure/cdn/cdn-purge-endpoint/) el contenido de la red CDN en Azure Portal cuando haya disponibles nuevas versiones de sus recursos.</span><span class="sxs-lookup"><span data-stu-id="3a39b-183">The CDN content may be [purged](/azure/cdn/cdn-purge-endpoint/) using the Azure portal when new versions of your assets are available.</span></span> <span data-ttu-id="3a39b-184">Este es un desafío similar a administrar el almacenamiento en caché del lado cliente, como lo que sucede en un explorador web.</span><span class="sxs-lookup"><span data-stu-id="3a39b-184">This is a similar challenge to managing client-side caching, such as that which occurs in a web browser.</span></span>
* <span data-ttu-id="3a39b-185">**Prueba**.</span><span class="sxs-lookup"><span data-stu-id="3a39b-185">**Testing**.</span></span> <span data-ttu-id="3a39b-186">Puede resultar difícil realizar pruebas locales de la configuración de la red CDN al desarrollar y probar una aplicación localmente o en un entorno de ensayo.</span><span class="sxs-lookup"><span data-stu-id="3a39b-186">It can be difficult to perform local testing of your CDN settings when developing and testing an application locally or in a staging environment.</span></span>
* <span data-ttu-id="3a39b-187">**Optimización del motor de búsqueda (SEO)**.</span><span class="sxs-lookup"><span data-stu-id="3a39b-187">**Search engine optimization (SEO)**.</span></span> <span data-ttu-id="3a39b-188">Cierto contenido, como imágenes y documentos, se sirve desde un dominio diferente cuando se usa la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-188">Content such as images and documents are served from a different domain when you use the CDN.</span></span> <span data-ttu-id="3a39b-189">Esto puede tener un efecto en la SEO de dicho contenido.</span><span class="sxs-lookup"><span data-stu-id="3a39b-189">This can have an effect on SEO for this content.</span></span>
* <span data-ttu-id="3a39b-190">**Seguridad de contenido**.</span><span class="sxs-lookup"><span data-stu-id="3a39b-190">**Content security**.</span></span> <span data-ttu-id="3a39b-191">Muchos servicios de la red CDN, como la red CDN de Azure, no ofrecen ningún tipo de control de acceso al contenido.</span><span class="sxs-lookup"><span data-stu-id="3a39b-191">Many CDN services such as Azure CDN do not currently offer any type of access control for the content.</span></span>
* <span data-ttu-id="3a39b-192">**Seguridad de los clientes**.</span><span class="sxs-lookup"><span data-stu-id="3a39b-192">**Client security**.</span></span> <span data-ttu-id="3a39b-193">Los clientes se pueden conectar desde un entorno que no permita el acceso a los recursos de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-193">Clients might connect from an environment that does not allow access to resources on the CDN.</span></span> <span data-ttu-id="3a39b-194">Podría tratarse de un entorno con restricciones de seguridad que limita el acceso a un conjunto de orígenes conocidos o uno que impide la carga de recursos desde cualquier otra cosa que no sea el origen de la página.</span><span class="sxs-lookup"><span data-stu-id="3a39b-194">This could be a security-constrained environment that limits access to only a set of known sources, or one that prevents loading of resources from anything other than the page origin.</span></span> <span data-ttu-id="3a39b-195">Para tratar estos casos se requiere una implementación de reserva.</span><span class="sxs-lookup"><span data-stu-id="3a39b-195">A fallback implementation is required to handle these cases.</span></span>
* <span data-ttu-id="3a39b-196">**Resistencia**.</span><span class="sxs-lookup"><span data-stu-id="3a39b-196">**Resilience**.</span></span> <span data-ttu-id="3a39b-197">La red CDN es un potencial punto único de error de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="3a39b-197">The CDN is a potential single point of failure for an application.</span></span> <span data-ttu-id="3a39b-198">Tiene un SLA de menor disponibilidad que el de almacenamiento de blobs (que se puede usar para entregar contenido directamente). Por tanto, es posible que tenga que considerar la implementación de un mecanismo de reserva para contenido crítico.</span><span class="sxs-lookup"><span data-stu-id="3a39b-198">It has a lower availability SLA than blob storage (which can be used to deliver content directly) so you may need to consider implementing a fallback mechanism for critical content.</span></span>

  <span data-ttu-id="3a39b-199">Puede supervisar la disponibilidad del contenido de la red CDN, su ancho de banda, los datos transferidos, los aciertos, la proporción de aciertos de caché y las métricas de caché desde el Azure Portal en [tiempo real](/azure/cdn/cdn-real-time-stats/) y [agregar informes](/azure/cdn/cdn-analyze-usage-patterns/).</span><span class="sxs-lookup"><span data-stu-id="3a39b-199">You can monitor your CDN content availability, bandwidth, data transferred, hits, cache hit ratio, and cache metrics from the Azure portal in [real-time](/azure/cdn/cdn-real-time-stats/) and [aggregate reports](/azure/cdn/cdn-analyze-usage-patterns/).</span></span>

<span data-ttu-id="3a39b-200">Escenarios donde puede resultar útil incluir la red CDN:</span><span class="sxs-lookup"><span data-stu-id="3a39b-200">Scenarios where CDN may be less useful include:</span></span>  

* <span data-ttu-id="3a39b-201">Si el contenido tiene una tasa de aciertos baja, solo se puede acceder a él pocas veces mientras sea válido (esto lo determina su período de vida).</span><span class="sxs-lookup"><span data-stu-id="3a39b-201">If the content has a low hit rate, it might be accessed only few times while it is valid (determined by its time-to-live setting).</span></span> <span data-ttu-id="3a39b-202">La primera vez que se descarga un elemento se generan dos cargos de transacciones, desde el origen a la red CDN y luego desde la red CDN al cliente.</span><span class="sxs-lookup"><span data-stu-id="3a39b-202">The first time an item is downloaded you incur two transaction charges from the origin to the CDN, and then from the CDN to the customer.</span></span>
* <span data-ttu-id="3a39b-203">Si los datos son privados, como por ejemplo en grandes empresas o en ecosistemas de la cadena de suministros.</span><span class="sxs-lookup"><span data-stu-id="3a39b-203">If the data is private, such as for large enterprises or supply chain ecosystems.</span></span>

## <a name="general-guidelines-and-good-practices"></a><span data-ttu-id="3a39b-204">Directrices generales y prácticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="3a39b-204">General guidelines and good practices</span></span>
<span data-ttu-id="3a39b-205">El uso de la red CDN es una buena manera de minimizar la carga en la aplicación y maximizar la disponibilidad y el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="3a39b-205">Using the CDN is a good way to minimize the load on your application, and maximize availability and performance.</span></span> <span data-ttu-id="3a39b-206">Considere la posibilidad de adoptar esta estrategia para todo el contenido adecuado y los recursos que usa la aplicación.</span><span class="sxs-lookup"><span data-stu-id="3a39b-206">Consider adopting this strategy for all of the appropriate content and resources your application uses.</span></span> <span data-ttu-id="3a39b-207">Al diseñar la estrategia de uso de la red CDN, considere los puntos de las siguientes secciones:</span><span class="sxs-lookup"><span data-stu-id="3a39b-207">Consider the points in the following sections when designing your strategy to use the CDN:</span></span>  

### <a name="origin"></a><span data-ttu-id="3a39b-208">Origen</span><span class="sxs-lookup"><span data-stu-id="3a39b-208">Origin</span></span>
<span data-ttu-id="3a39b-209">La implementación de contenido a través de la red CDN requiere que se especifique un punto de conexión HTTP o HTTPS que usará el servicio de la red CDN para obtener acceso al contenido y almacenarlo en la caché.</span><span class="sxs-lookup"><span data-stu-id="3a39b-209">Deploying content through the CDN simply requires you to specify an HTTP and/or HTTPS endpoint that the CDN service will use to access and cache the content.</span></span>

<span data-ttu-id="3a39b-210">El punto de conexión puede especificar un contenedor de Almacenamiento de blobs de Azure que contiene el contenido estático que se va a entregar a través de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-210">The endpoint can specify an Azure blob storage container that holds the static content you want to deliver through the CDN.</span></span> <span data-ttu-id="3a39b-211">El contenedor debe marcarse como público.</span><span class="sxs-lookup"><span data-stu-id="3a39b-211">The container must be marked as public.</span></span> <span data-ttu-id="3a39b-212">Solo los blobs de un contenedor público con acceso de lectura público están disponibles a través de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-212">Only blobs in a public container that have public read access are available through the CDN.</span></span>

<span data-ttu-id="3a39b-213">El punto de conexión puede especificar una carpeta denominada **cdn** en la raíz de una de las capas de proceso de la aplicación (por ejemplo, un rol web o una máquina virtual).</span><span class="sxs-lookup"><span data-stu-id="3a39b-213">The endpoint can specify a folder named **cdn** in the root of one of application’s compute layers (such as a web role or a virtual machine).</span></span> <span data-ttu-id="3a39b-214">Los resultados de las solicitudes de recursos, incluidos los recursos dinámicos, tales como las páginas ASPX, se almacenarán en caché en la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-214">The results from requests for resources, including dynamic resources such as ASPX pages, will be cached on the CDN.</span></span> <span data-ttu-id="3a39b-215">El período mínimo de almacenamiento en la caché es de 300 segundos.</span><span class="sxs-lookup"><span data-stu-id="3a39b-215">The minimum cache period is 300 seconds.</span></span> <span data-ttu-id="3a39b-216">Un período más corto impedirá que el contenido se implemente en la red CDN (para más información, consulte la sección *Control de caché*).</span><span class="sxs-lookup"><span data-stu-id="3a39b-216">Any shorter period prevents the content from being deployed to the CDN (for more information, see the following heading *Cache control* below).</span></span>

<span data-ttu-id="3a39b-217">Si usa Azure Web Apps, el punto de conexión se establece en la carpeta raíz del sitio al seleccionar el sitio cuando se crea la instancia de red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-217">If you are using Azure Web Apps, the endpoint is set to the root folder of the site by selecting the site when creating the CDN instance.</span></span> <span data-ttu-id="3a39b-218">Todo el contenido del sitio estará disponible a través de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-218">All of the content for the site will be available through the CDN.</span></span>

<span data-ttu-id="3a39b-219">En la mayoría de los casos, apuntar el punto de conexión de la red CDN a una carpeta dentro de una de las capas de proceso de la aplicación ofrece mayor flexibilidad y control.</span><span class="sxs-lookup"><span data-stu-id="3a39b-219">In most cases, pointing your CDN endpoint at a folder within one of the compute layers of your application offers more flexibility and control.</span></span> <span data-ttu-id="3a39b-220">Por ejemplo, resulta más fácil administrar los requisitos de enrutamiento actuales y futuros, así como generar dinámicamente el contenido estático, tales como imágenes en miniatura.</span><span class="sxs-lookup"><span data-stu-id="3a39b-220">For instance, it makes it easier to manage current and future routing requirements, and dynamically generate static content such as image thumbnails.</span></span>

<span data-ttu-id="3a39b-221">Puede usar [cadenas de consulta](/azure/cdn/cdn-query-string/) para diferenciar los objetos en la memoria caché cuando el contenido se entrega desde orígenes dinámicos, tales como páginas ASPX.</span><span class="sxs-lookup"><span data-stu-id="3a39b-221">You can use [query strings](/azure/cdn/cdn-query-string/) to differentiate objects in the cache when content is delivered from dynamic sources, such as ASPX pages.</span></span> <span data-ttu-id="3a39b-222">Sin embargo, este comportamiento se puede deshabilitar con una opción de configuración en Azure Portal cuando se especifica el punto de conexión de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-222">However, this behavior can be disabled by a setting in the Azure portal when you specify the CDN endpoint.</span></span> <span data-ttu-id="3a39b-223">Cuando se entrega el contenido desde el almacenamiento de blobs, las cadenas de consulta se tratan como literales de cadena para que dos elementos que tienen el mismo nombre pero cadenas de consulta diferentes se almacenen como elementos separados en la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-223">When delivering content from blob storage, query strings are treated as string literals so two items that have the same name but different query strings are stored as separate items on the CDN.</span></span>

<span data-ttu-id="3a39b-224">Puede usar la reescritura de direcciones URL para los recursos, como scripts y otro contenido, con el fin de evitar mover los archivos a la carpeta de origen de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-224">You can utilize URL rewriting for resources, such as scripts and other content, to avoid moving your files to the CDN origin folder.</span></span>

<span data-ttu-id="3a39b-225">Al usar blobs de almacenamiento de Azure para almacenar el contenido de la red CDN, la dirección URL de los recursos de los blobs distingue mayúsculas de minúsculas para el nombre de contenedor y blob.</span><span class="sxs-lookup"><span data-stu-id="3a39b-225">When using Azure storage blobs to hold content for the CDN, the URL of the resources in blobs is case-sensitive for the container and blob name.</span></span>

<span data-ttu-id="3a39b-226">Al usar orígenes personalizados o Azure Web Apps, especifique la ruta de acceso a la instancia de la red CDN en los vínculos a los recursos.</span><span class="sxs-lookup"><span data-stu-id="3a39b-226">When using custom origins or Azure Web Apps, you specify the path to the CDN instance in the links to resources.</span></span> <span data-ttu-id="3a39b-227">Por ejemplo, en el siguiente fragmento se especifica un archivo de imagen en la carpeta **Images** del sitio que se entregarán a través de la red CDN:</span><span class="sxs-lookup"><span data-stu-id="3a39b-227">For example, the following specifies an image file in the **Images** folder of the site that will be delivered through the CDN:</span></span>

```XML
<img src="http://[your-cdn-endpoint].azureedge.net/Images/image.jpg" />
```

### <a name="deployment"></a><span data-ttu-id="3a39b-228">Implementación</span><span class="sxs-lookup"><span data-stu-id="3a39b-228">Deployment</span></span>
<span data-ttu-id="3a39b-229">Es posible que sea preciso que el contenido estático se aprovisione e implemente de forma independiente de la aplicación si no se incluye en el paquete de implementación o en el proceso de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="3a39b-229">Static content may need to be provisioned and deployed independently from the application if you do not include it in the application deployment package or process.</span></span> <span data-ttu-id="3a39b-230">Tenga en cuenta cómo esto afectará al método de control de versiones que se use para administrar tanto los componentes de aplicaciones como el contenido de recursos estáticos.</span><span class="sxs-lookup"><span data-stu-id="3a39b-230">Consider how this will affect the versioning approach you use to manage both the application components and the static resource content.</span></span>

<span data-ttu-id="3a39b-231">Tenga en cuenta cómo se tratará la unión (la combinación de varios archivos en un solo archivo) y la minificación (la eliminación de caracteres innecesarios, como espacios en blanco, caracteres de nueva línea, comentarios y otros caracteres) de los archivos de script y CSS.</span><span class="sxs-lookup"><span data-stu-id="3a39b-231">Consider how bundling (combining several files into one file) and minification (removing unnecessary characters such as white space, new line characters, comments, and other characters) for script and CSS files will be handled.</span></span> <span data-ttu-id="3a39b-232">Estas técnicas se usan de manera habitual, pueden reducir los tiempos de carga de los clientes y son compatibles con la entrega de contenido a través de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-232">These are commonly used techniques that can reduce load times for clients, and are compatible with delivering content through the CDN.</span></span> <span data-ttu-id="3a39b-233">Para más información, consulte el artículo sobre la [unión y minificación](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification).</span><span class="sxs-lookup"><span data-stu-id="3a39b-233">For more information, see [Bundling and Minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification).</span></span>

<span data-ttu-id="3a39b-234">Si necesita implementar el contenido en una ubicación adicional, será un paso adicional en el proceso de implementación.</span><span class="sxs-lookup"><span data-stu-id="3a39b-234">If you need to deploy the content to an additional location, this will be an extra step in the deployment process.</span></span> <span data-ttu-id="3a39b-235">Si la aplicación actualiza el contenido para la red CDN, quizás a intervalos regulares o en respuesta a un evento, debe almacenar el contenido actualizado en las ubicaciones adicionales, así como el extremo de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-235">If the application updates the content for the CDN, perhaps at regular intervals or in response to an event, it must store the updated content in any additional locations as well as the endpoint for the CDN.</span></span>

<span data-ttu-id="3a39b-236">No se puede configurar un punto de conexión de red CDN para una aplicación en el emulador local de Azure en Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="3a39b-236">You cannot set up a CDN endpoint for an application in the local Azure emulator in Visual Studio.</span></span> <span data-ttu-id="3a39b-237">Esto afectará a las pruebas unitarias, a las pruebas funcionales y a las pruebas finales previas a la implementación.</span><span class="sxs-lookup"><span data-stu-id="3a39b-237">This restriction will affect unit testing, functional testing, and final pre-deployment testing.</span></span> <span data-ttu-id="3a39b-238">Debe permitir esto al implementar un mecanismo alternativo.</span><span class="sxs-lookup"><span data-stu-id="3a39b-238">You must allow for this by implementing an alternative mechanism.</span></span> <span data-ttu-id="3a39b-239">Por ejemplo, podría realizar una implementación previa del contenido en la red CDN mediante una aplicación o utilidad personalizada, y realizar pruebas durante el período en que esté almacenado en la caché.</span><span class="sxs-lookup"><span data-stu-id="3a39b-239">For example, you could pre-deploy the content to the CDN using a custom application or utility, and perform testing during the period in which it is cached.</span></span> <span data-ttu-id="3a39b-240">También puede usar directivas de compilación o constantes globales para controlar el lugar desde el que la aplicación carga los recursos.</span><span class="sxs-lookup"><span data-stu-id="3a39b-240">Alternatively, use compile directives or global constants to control from where the application loads the resources.</span></span> <span data-ttu-id="3a39b-241">Por ejemplo, durante la ejecución en modo de depuración, podría cargar recursos, como paquetes de script de cliente y otro contenido, de una carpeta local y usar la red CDN durante la ejecución en modo de lanzamiento.</span><span class="sxs-lookup"><span data-stu-id="3a39b-241">For example, when running in debug mode it could load resources such as client-side script bundles and other content from a local folder, and use the CDN when running in release mode.</span></span>

<span data-ttu-id="3a39b-242">Considere qué enfoque de compresión desea que admita la red CDN:</span><span class="sxs-lookup"><span data-stu-id="3a39b-242">Consider which compression approach you want your CDN to support:</span></span>

* <span data-ttu-id="3a39b-243">Puede [habilitar la compresión](/azure/cdn/cdn-improve-performance/) en el servidor de origen, en cuyo caso la red CDN admitirá la compresión de forma predeterminada y entregará contenido comprimido a los clientes en los formatos zip o gzip.</span><span class="sxs-lookup"><span data-stu-id="3a39b-243">You can [enable compression](/azure/cdn/cdn-improve-performance/) on your origin server, in which case the CDN will support compression by default and deliver compressed content to clients in a format such as zip or gzip.</span></span> <span data-ttu-id="3a39b-244">Si se usa una carpeta de aplicaciones como punto de conexión de la red CDN, el servidor puede comprimir una parte del contenido automáticamente, del mismo modo que cuando lo entrega directamente a un explorador web u otro tipo de cliente.</span><span class="sxs-lookup"><span data-stu-id="3a39b-244">When using an application folder as the CDN endpoint, the server may compress some content automatically in the same way as when delivering it directly to a web browser or other type of client.</span></span> <span data-ttu-id="3a39b-245">El formato depende del valor del encabezado **Accept-Encoding** de la solicitud enviada por el cliente.</span><span class="sxs-lookup"><span data-stu-id="3a39b-245">The format depends on the value of the **Accept-Encoding** header in the request sent by the client.</span></span> <span data-ttu-id="3a39b-246">En Azure, el mecanismo predeterminado es comprimir automáticamente el contenido cuando el uso de la CPU es inferior al 50 %.</span><span class="sxs-lookup"><span data-stu-id="3a39b-246">In Azure the default mechanism is to automatically compress content when CPU utilization is below 50%.</span></span> <span data-ttu-id="3a39b-247">Si se usa un servicio en la nube para hospedar la aplicación, el cambio de la configuración puede requerir que se use una tarea de inicio para activar la compresión de la salida dinámica en IIS.</span><span class="sxs-lookup"><span data-stu-id="3a39b-247">If you are using a cloud service to host the application, changing the settings may require using a startup task to turn on compression of dynamic output in IIS.</span></span> <span data-ttu-id="3a39b-248">Para más información, consulte [Enabling gzip compression with Microsoft Azure CDN through Web Role](http://blogs.msdn.com/b/avkashchauhan/archive/2012/03/05/enableing-gzip-compression-with-windows-azure-cdn-through-web-role.aspx) .</span><span class="sxs-lookup"><span data-stu-id="3a39b-248">See [Enabling gzip compression with Microsoft Azure CDN through a Web Role](http://blogs.msdn.com/b/avkashchauhan/archive/2012/03/05/enableing-gzip-compression-with-windows-azure-cdn-through-web-role.aspx) for more information.</span></span>
* <span data-ttu-id="3a39b-249">Puede habilitar la compresión directamente en los servidores perimetrales de la red CDN, en cuyo caso esta red comprimirá los archivos y los servirá a los usuarios finales.</span><span class="sxs-lookup"><span data-stu-id="3a39b-249">You can enable compression directly on CDN edge servers, in which case the CDN will compress the files and serve it to end users.</span></span> <span data-ttu-id="3a39b-250">Para más información, consulte [Compresión en la red CDN de Azure](/azure/cdn/cdn-improve-performance/).</span><span class="sxs-lookup"><span data-stu-id="3a39b-250">For more information, see [Azure CDN Compression](/azure/cdn/cdn-improve-performance/).</span></span>

### <a name="routing-and-versioning"></a><span data-ttu-id="3a39b-251">Enrutamiento y control de versiones</span><span class="sxs-lookup"><span data-stu-id="3a39b-251">Routing and versioning</span></span>
<span data-ttu-id="3a39b-252">Es posible que necesite distintas instancias de la red CDN en momentos diferentes.</span><span class="sxs-lookup"><span data-stu-id="3a39b-252">You may need to use different CDN instances at various times.</span></span> <span data-ttu-id="3a39b-253">Por ejemplo, al implementar una versión nueva de la aplicación puede usar una red CDN nueva y conservar la red CDN anterior (que tiene el contenido en un formato anterior) para las versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="3a39b-253">For example, when you deploy a new version of the application you may want to use a new CDN and retain the old CDN (holding content in an older format) for previous versions.</span></span> <span data-ttu-id="3a39b-254">Si usa Azure Blob Storage como origen del contenido, puede crear una cuenta de almacenamiento independiente o un contenedor independiente y elegir el punto de conexión de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-254">If you use Azure blob storage as the content origin, you can create a separate storage account or a separate container and point the CDN endpoint to it.</span></span> <span data-ttu-id="3a39b-255">Si usa la carpeta raíz cdn dentro de la aplicación como el punto de conexión de la red CDN, puede usar técnicas de reescritura de direcciones URL para dirigir las solicitudes a otra carpeta.</span><span class="sxs-lookup"><span data-stu-id="3a39b-255">If you use the cdn root folder within the application as the CDN endpoint, you can use URL rewriting techniques to direct requests to a different folder.</span></span>

<span data-ttu-id="3a39b-256">No use la cadena de consulta para indicar versiones diferentes de la aplicación en los vínculos a los recursos de la red CDN porque, al recuperar el contenido de Almacenamiento de blobs de Azure, la cadena de consulta forma parte del nombre del recurso (el nombre del blob).</span><span class="sxs-lookup"><span data-stu-id="3a39b-256">Do not use the query string to denote different versions of the application in links to resources on the CDN because, when retrieving content from Azure blob storage, the query string is part of the resource name (the blob name).</span></span> <span data-ttu-id="3a39b-257">Este enfoque también puede afectar a la manera en que el cliente almacena los recursos en la caché.</span><span class="sxs-lookup"><span data-stu-id="3a39b-257">This approach can also affect how the client caches resources.</span></span>

<span data-ttu-id="3a39b-258">La implementación de nuevas versiones de contenido estático cuando se actualiza una aplicación puede ser un desafío si los recursos anteriores se almacenan en caché en la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-258">Deploying new versions of static content when you update an application can be a challenge if the previous resources are cached on the CDN.</span></span> <span data-ttu-id="3a39b-259">Para más información, consulte la sección *Control de caché*.</span><span class="sxs-lookup"><span data-stu-id="3a39b-259">For more information, see the section *Cache control*).</span></span>

<span data-ttu-id="3a39b-260">Considere la posibilidad de restringir el acceso al contenido de la red CDN por país.</span><span class="sxs-lookup"><span data-stu-id="3a39b-260">Consider restricting the CDN content access by country.</span></span> <span data-ttu-id="3a39b-261">La red CDN de Azure le permite filtrar las solicitudes en función del país de origen y restringir el contenido que se entrega.</span><span class="sxs-lookup"><span data-stu-id="3a39b-261">Azure CDN allows you to filter requests based on the country of origin and restrict the content delivered.</span></span> <span data-ttu-id="3a39b-262">Para más información, consulte [Restricción del acceso a contenidos por país](/azure/cdn/cdn-restrict-access-by-country/).</span><span class="sxs-lookup"><span data-stu-id="3a39b-262">For more information, see [Restrict access to your content by country](/azure/cdn/cdn-restrict-access-by-country/).</span></span>

### <a name="cache-control"></a><span data-ttu-id="3a39b-263">Control de caché</span><span class="sxs-lookup"><span data-stu-id="3a39b-263">Cache control</span></span>
<span data-ttu-id="3a39b-264">Considere cómo administrar el almacenamiento en la caché en el sistema.</span><span class="sxs-lookup"><span data-stu-id="3a39b-264">Consider how to manage caching within the system.</span></span> <span data-ttu-id="3a39b-265">Por ejemplo, si se usa una carpeta como origen de la red CDN, se puede especificar la capacidad de almacenamiento en caché de las páginas que generan el contenido y el tiempo de caducidad del contenido de todos los recursos de una carpeta específica.</span><span class="sxs-lookup"><span data-stu-id="3a39b-265">For example, when using a folder as the CDN origin you can specify the cacheability of pages that generate the content, and the content expiry time for all the resources in a specific folder.</span></span> <span data-ttu-id="3a39b-266">También puede especificar las propiedades de caché para la red CDN y para el cliente con encabezados HTTP estándar.</span><span class="sxs-lookup"><span data-stu-id="3a39b-266">You can also specify cache properties for the CDN, and for the client using standard HTTP headers.</span></span> <span data-ttu-id="3a39b-267">Aunque ya debería estar administrando el almacenamiento en caché en el servidor y cliente, el uso de la red CDN le ayudará a hacer más consciente de cómo y dónde el contenido se almacena en caché.</span><span class="sxs-lookup"><span data-stu-id="3a39b-267">Although you should already be managing caching on the server and client, using the CDN will help to make you more aware of how your content is cached, and where.</span></span>

<span data-ttu-id="3a39b-268">Para impedir que los objetos estén disponibles en la red CDN, puede eliminarlos del origen (contenedor de blobs o carpeta raíz *cdn* de la aplicación), quitar o eliminar el punto de conexión de la red CDN, o, en el caso de Almacenamiento de blobs, hacer que el contenedor o el blob sean privados.</span><span class="sxs-lookup"><span data-stu-id="3a39b-268">To prevent objects from being available on the CDN you can delete them from the origin (blob container or application *cdn* root folder), remove or delete the CDN endpoint, or, in the case of blob storage, make the container or blob private.</span></span> <span data-ttu-id="3a39b-269">Sin embargo, los elementos solo se quitarán de la red CDN cuando expire su período de vida.</span><span class="sxs-lookup"><span data-stu-id="3a39b-269">However, items will be removed from the CDN only when their time-to-live expires.</span></span> <span data-ttu-id="3a39b-270">Si no se especifica un período de expiración de la caché (por ejemplo, cuando el contenido se carga desde Blob Storage), se almacenará en la caché de la red CDN un máximo de siete días.</span><span class="sxs-lookup"><span data-stu-id="3a39b-270">If no cache expiry period is specified (such as when content is loaded from blob storage), it is cached on the CDN for up to seven days.</span></span>  <span data-ttu-id="3a39b-271">También puede [purgar un punto de conexión de CDN](/azure/cdn/cdn-purge-endpoint/)de forma manual.</span><span class="sxs-lookup"><span data-stu-id="3a39b-271">You can also manually [purge a CDN endpoint](/azure/cdn/cdn-purge-endpoint/).</span></span>

<span data-ttu-id="3a39b-272">En una aplicación web, se puede establecer el almacenamiento en caché y la fecha de expiración de todo el contenido mediante el elemento *clientCache* de la sección *system.webServer/staticContent* del archivo web.config.</span><span class="sxs-lookup"><span data-stu-id="3a39b-272">In a web application, you can set the caching and expiry for all content by using the *clientCache* element in the *system.webServer/staticContent* section of the web.config file.</span></span> <span data-ttu-id="3a39b-273">Recuerde que si coloca un archivo web.config en una carpeta, los archivos de dicha carpeta y todas las subcarpetas resultan afectados.</span><span class="sxs-lookup"><span data-stu-id="3a39b-273">Remember that when you place a web.config file in a folder it affects the files in that folder and all subfolders.</span></span>

<span data-ttu-id="3a39b-274">Si crea el contenido de la red CDN dinámicamente (por ejemplo, en el código de la aplicación) asegúrese de especificar la propiedad *Cache.SetExpires* en todas las páginas.</span><span class="sxs-lookup"><span data-stu-id="3a39b-274">If you create the content for the CDN dynamically (in your application code for example), ensure that you specify the *Cache.SetExpires* property on each page.</span></span> <span data-ttu-id="3a39b-275">La red CDN no almacenará en la caché la salida de las páginas que usan la configuración predeterminada de capacidad de almacenamiento en caché *public*.</span><span class="sxs-lookup"><span data-stu-id="3a39b-275">The CDN will not cache the output from pages that use the default cacheability setting of *public*.</span></span>  <span data-ttu-id="3a39b-276">Establezca el período de expiración de caché en un valor adecuado para asegurarse de que el contenido no se descarte y se vuelva a cargar desde la aplicación a intervalos muy cortos.</span><span class="sxs-lookup"><span data-stu-id="3a39b-276">Set the cache expiry period to a suitable value to ensure that the content is not discarded and reloaded from the application at very short intervals.</span></span>  

### <a name="security"></a><span data-ttu-id="3a39b-277">Seguridad</span><span class="sxs-lookup"><span data-stu-id="3a39b-277">Security</span></span>
<span data-ttu-id="3a39b-278">La red CDN puede entregar contenido a través de HTTPS (SSL) con el certificado que proporciona la red CDN, así como a través de HTTP estándar.</span><span class="sxs-lookup"><span data-stu-id="3a39b-278">The CDN can deliver content over HTTPS (SSL), by using the certificate provided by the CDN, as well as over standard HTTP.</span></span> <span data-ttu-id="3a39b-279">Es posible que tenga que usar HTTPS para solicitar el contenido estático que se muestra en las páginas que se cargan a través de HTTPS para evitar las advertencias del explorador sobre contenido mixto.</span><span class="sxs-lookup"><span data-stu-id="3a39b-279">To avoid browser warnings about mixed content, you might need to use HTTPS to request static content that is displayed in pages loaded through HTTPS.</span></span>

<span data-ttu-id="3a39b-280">Si entrega recursos estáticos, tales como archivos de fuentes, mediante la red CDN, pueden surgir problemas de directiva del mismo origen si usa una llamada *XMLHttpRequest* para solicitar estos recursos a un dominio distinto.</span><span class="sxs-lookup"><span data-stu-id="3a39b-280">If you deliver static assets such as font files by using the CDN, you might encounter same-origin policy issues if you use an *XMLHttpRequest* call to request these resources from a different domain.</span></span> <span data-ttu-id="3a39b-281">Muchos exploradores web impiden el uso compartido de recursos entre orígenes (CORS), a menos que el servidor web se haya configurado para establecer los encabezados de respuesta adecuados.</span><span class="sxs-lookup"><span data-stu-id="3a39b-281">Many web browsers prevent cross-origin resource sharing (CORS) unless the web server is configured to set the appropriate response headers.</span></span> <span data-ttu-id="3a39b-282">Para admitir CORS, puede configurar la red CDN con uno de los métodos siguientes:</span><span class="sxs-lookup"><span data-stu-id="3a39b-282">You can configure the CDN to support CORS by using one of the following methods:</span></span>

* <span data-ttu-id="3a39b-283">Use el motor de reglas de CDN para agregar encabezados CORS a las respuestas.</span><span class="sxs-lookup"><span data-stu-id="3a39b-283">Use the CDN rules engine to add CORS headers to the responses.</span></span> <span data-ttu-id="3a39b-284">Este método suele ser el mejor porque admite caracteres comodín y permite especificar varios orígenes.</span><span class="sxs-lookup"><span data-stu-id="3a39b-284">This method is usually the best one to use because both wildcard and multiple specific-allowed origins are supported.</span></span> <span data-ttu-id="3a39b-285">Para más información, consulte [Uso de Azure CDN con CORS](https://docs.microsoft.com/en-us/azure/cdn/cdn-cors).</span><span class="sxs-lookup"><span data-stu-id="3a39b-285">For more information, see [Using Azure CDN with CORS](https://docs.microsoft.com/en-us/azure/cdn/cdn-cors).</span></span> 
* <span data-ttu-id="3a39b-286">Agregue *CorsRule* a las propiedades del servicio.</span><span class="sxs-lookup"><span data-stu-id="3a39b-286">Add a *CorsRule* to the service properties.</span></span> <span data-ttu-id="3a39b-287">Puede usar este método si el origen desde el que se entrega el contenido es Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="3a39b-287">You can use this method if the origin from which you are delivering content is Azure blob storage.</span></span> <span data-ttu-id="3a39b-288">La regla puede especificar los orígenes permitidos para las solicitudes CORS, los métodos permitidos, como GET, y el tiempo máximo en segundos para la regla (es decir, el período dentro del cual el cliente debe solicitar los recursos vinculados después de cargar el contenido original).</span><span class="sxs-lookup"><span data-stu-id="3a39b-288">The rule can specify the allowed origins for CORS requests, the allowed methods such as GET, and the maximum age in seconds for the rule (the period within which the client must request the linked resources after loading the original content).</span></span> <span data-ttu-id="3a39b-289">Al establecer CORS en Storage para usarlo con CDN, solo se admite el carácter comodín '*' para la lista de orígenes permitidos.</span><span class="sxs-lookup"><span data-stu-id="3a39b-289">When you set CORS on Storage to use with CDN, only the ‘*’ wildcard is supported for the allowed origins list.</span></span> <span data-ttu-id="3a39b-290">Para más información, consulte [Compatibilidad con Uso compartido de recursos entre orígenes (CORS) para los Servicios de Azure Storage](http://msdn.microsoft.com/library/azure/dn535601.aspx).</span><span class="sxs-lookup"><span data-stu-id="3a39b-290">For more information, see [Cross-Origin Resource Sharing (CORS) Support for the Azure Storage Services](http://msdn.microsoft.com/library/azure/dn535601.aspx).</span></span>
* <span data-ttu-id="3a39b-291">Configure las reglas de salida en el archivo de configuración de la aplicación para establecer un encabezado*Access-Control-Allow-Origin* en todas las respuestas.</span><span class="sxs-lookup"><span data-stu-id="3a39b-291">Configure outbound rules in the application configuration file to set an *Access-Control-Allow-Origin* header on all responses.</span></span> <span data-ttu-id="3a39b-292">Puede utilizar este método si el servidor de origen está ejecutando IIS.</span><span class="sxs-lookup"><span data-stu-id="3a39b-292">You can use this method if the origin server is running IIS.</span></span> <span data-ttu-id="3a39b-293">Cuando se usa este método con CDN, solo se admite el carácter comodín '*' para la lista de orígenes permitidos.</span><span class="sxs-lookup"><span data-stu-id="3a39b-293">When you use this method with CDN, only the ‘*’ wildcard is supported for the allowed origins list.</span></span> <span data-ttu-id="3a39b-294">Para más información sobre el uso de reglas de reescritura, consulte el artículo sobre el [módulo de reescritura de direcciones URL](http://www.iis.net/learn/extensions/url-rewrite-module).</span><span class="sxs-lookup"><span data-stu-id="3a39b-294">For more information about using rewrite rules, see [URL Rewrite Module](http://www.iis.net/learn/extensions/url-rewrite-module).</span></span>

### <a name="custom-domains"></a><span data-ttu-id="3a39b-295">Dominios personalizados</span><span class="sxs-lookup"><span data-stu-id="3a39b-295">Custom domains</span></span>
<span data-ttu-id="3a39b-296">La red CDN de Azure permite especificar un [nombre de dominio personalizado](/azure/cdn/cdn-map-content-to-custom-domain/) y usarlo para acceder a recursos a través de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-296">The Azure CDN allows you to specify a [custom domain name](/azure/cdn/cdn-map-content-to-custom-domain/) and use it to access resources through the CDN.</span></span> <span data-ttu-id="3a39b-297">También puede configurar un nombre de subdominio personalizado con un registro *CNAME* en el DNS.</span><span class="sxs-lookup"><span data-stu-id="3a39b-297">You can also set up a custom subdomain name using a *CNAME* record in your DNS.</span></span> <span data-ttu-id="3a39b-298">El uso de este método puede proporcionar un nivel adicional de abstracción y control.</span><span class="sxs-lookup"><span data-stu-id="3a39b-298">Using this approach can provide an additional layer of abstraction and control.</span></span>

<span data-ttu-id="3a39b-299">Si se usa un registro *CNAME*, no se puede usar SSL, ya que la red CDN usa su propio certificado SSL único y este no coincidirá con los nombres de dominio o subdominio personalizados.</span><span class="sxs-lookup"><span data-stu-id="3a39b-299">If you use a *CNAME*, you cannot use SSL because the CDN uses its own single SSL certificate, and this certificate will not match your custom domain/subdomain names.</span></span>

### <a name="cdn-fallback"></a><span data-ttu-id="3a39b-300">Reserva de red CDN</span><span class="sxs-lookup"><span data-stu-id="3a39b-300">CDN fallback</span></span>
<span data-ttu-id="3a39b-301">Debe considerar la forma en que la aplicación hará frente a un error o a la no disponibilidad temporal de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-301">Consider how your application will cope with a failure or temporary unavailability of the CDN.</span></span> <span data-ttu-id="3a39b-302">Las aplicaciones cliente pueden usar copias de los recursos almacenados en la caché local (en el cliente) durante las solicitudes anteriores, o bien, se puede incluir código que detecte errores y, en su lugar, solicite recursos del origen (la carpeta de aplicaciones o el contenedor de blobs de Azure que contiene los recursos) si la red CDN no está disponible.</span><span class="sxs-lookup"><span data-stu-id="3a39b-302">Client applications may be able to use copies of the resources that were cached locally (on the client) during previous requests, or you can include code that detects failure and instead requests resources from the origin (the application folder or Azure blob container that holds the resources) if the CDN is unavailable.</span></span>

<span data-ttu-id="3a39b-303">El ejemplo siguiente muestra los mecanismos de reserva con [aplicaciones auxiliares de etiquetas](https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro) en una vista de Razor.</span><span class="sxs-lookup"><span data-stu-id="3a39b-303">The example below shows the fallback mechanisms using [Tag Helpers](https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro) in a Razor view.</span></span>

```HTML
...
<link rel="stylesheet" href="https://[your-cdn-endpoint].azureedge.net/lib/bootstrap/dist/css/bootstrap.min.css"
      asp-fallback-href="~/lib/bootstrap/dist/css/bootstrap.min.css"
      asp-fallback-test-class="sr-only" asp-fallback-test-property="position" asp-fallback-test-value="absolute"/>
<link rel="stylesheet" href="~/css/site.min.css" asp-append-version="true"/>
...
<script src="https://[your-cdn-endpoint].azureedge.net/lib/jquery/dist/jquery-2.2.0.min.js"
        asp-fallback-src="~/lib/jquery/dist/jquery.min.js"
        asp-fallback-test="window.jQuery">
</script>
<script src="https://[your-cdn-endpoint].azureedge.net/lib/bootstrap/dist/js/bootstrap.min.js"
        asp-fallback-src="~/lib/bootstrap/dist/js/bootstrap.min.js"
        asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal">
</script>
...
```

### <a name="search-engine-optimization"></a><span data-ttu-id="3a39b-304">Optimización del motor de búsqueda</span><span class="sxs-lookup"><span data-stu-id="3a39b-304">Search engine optimization</span></span>
<span data-ttu-id="3a39b-305">Si la SEO es una consideración importante en la aplicación, realice las siguientes tareas:</span><span class="sxs-lookup"><span data-stu-id="3a39b-305">If SEO is an important consideration in your application, perform the following tasks:</span></span>

* <span data-ttu-id="3a39b-306">Incluya un encabezado canónico *Rel* en todas las páginas o recursos.</span><span class="sxs-lookup"><span data-stu-id="3a39b-306">Include a *Rel* canonical header in each page or resource.</span></span>
* <span data-ttu-id="3a39b-307">Use un registro de subdominio *CNAME* y acceda a los recursos con este nombre.</span><span class="sxs-lookup"><span data-stu-id="3a39b-307">Use a *CNAME* subdomain record and access the resources using this name.</span></span>
* <span data-ttu-id="3a39b-308">Tenga en cuenta el impacto del hecho de que la dirección IP de la red CDN podría estar en un país o región diferente de la aplicación en sí.</span><span class="sxs-lookup"><span data-stu-id="3a39b-308">Consider the impact of the fact that the IP address of the CDN may be a country or region that differs from that of the application itself.</span></span>
* <span data-ttu-id="3a39b-309">Cuando se usa el almacenamiento de blobs de Azure como origen, conserve la misma estructura de archivos para los recursos de la red CDN que la de las carpetas de aplicación.</span><span class="sxs-lookup"><span data-stu-id="3a39b-309">When using Azure blob storage as the origin, maintain the same file structure for resources on the CDN as in the application folders.</span></span>

### <a name="monitoring-and-logging"></a><span data-ttu-id="3a39b-310">Supervisión y registro</span><span class="sxs-lookup"><span data-stu-id="3a39b-310">Monitoring and logging</span></span>
<span data-ttu-id="3a39b-311">Incluya la red CDN como parte de la estrategia de supervisión de la aplicación para la detección y medición de errores o apariciones de latencia extendida.</span><span class="sxs-lookup"><span data-stu-id="3a39b-311">Include the CDN as part of your application monitoring strategy to detect and measure failures or extended latency occurrences.</span></span>  <span data-ttu-id="3a39b-312">La supervisión se puede realizar desde el Administrador de perfiles de la red CDN, ubicado en el sitio de Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="3a39b-312">Monitoring is available from the CDN profile manager located on the Azure portal site.</span></span>

<span data-ttu-id="3a39b-313">Habilite el registro en la red CDN y supervise dicho registro como parte de las operaciones diarias.</span><span class="sxs-lookup"><span data-stu-id="3a39b-313">Enable logging for the CDN and monitor this log as part of your daily operations.</span></span>

<span data-ttu-id="3a39b-314">Consider la posibilidad de analizar el tráfico de la red CDN para encontrar patrones de uso.</span><span class="sxs-lookup"><span data-stu-id="3a39b-314">Consider analyzing the CDN traffic for usage patterns.</span></span> <span data-ttu-id="3a39b-315">El Portal de Azure proporciona herramientas que le permiten supervisar:</span><span class="sxs-lookup"><span data-stu-id="3a39b-315">The Azure portal provides tools that enable you to monitor:</span></span>

* <span data-ttu-id="3a39b-316">El ancho de banda</span><span class="sxs-lookup"><span data-stu-id="3a39b-316">Bandwidth,</span></span>
* <span data-ttu-id="3a39b-317">Los datos transferidos</span><span class="sxs-lookup"><span data-stu-id="3a39b-317">Data Transferred,</span></span>
* <span data-ttu-id="3a39b-318">Los aciertos (códigos de estado)</span><span class="sxs-lookup"><span data-stu-id="3a39b-318">Hits (status codes),</span></span>
* <span data-ttu-id="3a39b-319">El estado de la memoria caché</span><span class="sxs-lookup"><span data-stu-id="3a39b-319">Cache Status,</span></span>
* <span data-ttu-id="3a39b-320">La proporción de aciertos de caché</span><span class="sxs-lookup"><span data-stu-id="3a39b-320">Cache HIT Ratio, and</span></span>
* <span data-ttu-id="3a39b-321">La proporción de solicitudes IPv4/IPv6</span><span class="sxs-lookup"><span data-stu-id="3a39b-321">Ratio of IPV4/IPV6 requests.</span></span>

<span data-ttu-id="3a39b-322">Para más información, consulte [Análisis de patrones de uso de la red CDN de Azure](/azure/cdn/cdn-analyze-usage-patterns/).</span><span class="sxs-lookup"><span data-stu-id="3a39b-322">For more information, see [Analyze CDN usage patterns](/azure/cdn/cdn-analyze-usage-patterns/).</span></span>

### <a name="cost-implications"></a><span data-ttu-id="3a39b-323">Costos asociados</span><span class="sxs-lookup"><span data-stu-id="3a39b-323">Cost implications</span></span>
<span data-ttu-id="3a39b-324">Se le cobrará por las transferencias de datos de salida desde la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-324">You are charged for outbound data transfers from the CDN.</span></span>  <span data-ttu-id="3a39b-325">Además, si usa el Almacenamiento de blobs para hospedar sus activos, se le cobrará por las transacciones de almacenamiento cuando la red CDN cargue datos desde la aplicación.</span><span class="sxs-lookup"><span data-stu-id="3a39b-325">Additionally, if you're using blob storage to host your assets, you are charged for storage transactions when the CDN loads data from your application.</span></span> <span data-ttu-id="3a39b-326">Establezca períodos de expiración de caché realistas para el contenido con el fin de garantizar la actualización, pero no tan corto que se produzca la recarga repetida del contenido de la aplicación o el almacenamiento de blobs en la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-326">Set realistic cache expiry periods for content to ensure freshness, but not so short as to cause repeated reloading of content from the application or blob storage to the CDN.</span></span>

<span data-ttu-id="3a39b-327">Los elementos que raramente se descargan incurrirá en los dos cargos de transacción, sin proporcionar ninguna reducción significativa en la carga del servidor.</span><span class="sxs-lookup"><span data-stu-id="3a39b-327">Items that are rarely downloaded will incur the two transaction charges without providing any significant reduction in server load.</span></span>

### <a name="bundling-and-minification"></a><span data-ttu-id="3a39b-328">unión y minificación</span><span class="sxs-lookup"><span data-stu-id="3a39b-328">Bundling and minification</span></span>
<span data-ttu-id="3a39b-329">Use la unión y minificación para reducir el tamaño de los recursos como código JavaScript y páginas HTML almacenados en la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-329">Use bundling and minification to reduce the size of resources such as JavaScript code and HTML pages stored in the CDN.</span></span> <span data-ttu-id="3a39b-330">Esta estrategia puede ayudarle a reducir el tiempo necesario para descargar estos elementos en el cliente.</span><span class="sxs-lookup"><span data-stu-id="3a39b-330">This strategy can help to reduce the time taken to download these items to the client.</span></span>

<span data-ttu-id="3a39b-331">La unión y minificación los puede controlar ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3a39b-331">Bundling and minification can be handled by ASP.NET.</span></span> <span data-ttu-id="3a39b-332">En un proyecto MVC, las uniones se definen en *BundleConfig.cs*.</span><span class="sxs-lookup"><span data-stu-id="3a39b-332">In an MVC project, you define your bundles in *BundleConfig.cs*.</span></span> <span data-ttu-id="3a39b-333">Una referencia a la unión minificada del script se crea al llamar al método *Script.Render* , normalmente en el código de la clase de vista.</span><span class="sxs-lookup"><span data-stu-id="3a39b-333">A reference to the minified script bundle is created by calling the *Script.Render* method, typically in code in the view class.</span></span> <span data-ttu-id="3a39b-334">Esta referencia contiene una cadena de consulta en la que se incluye un valor hash, que se basa en el contenido de la unión.</span><span class="sxs-lookup"><span data-stu-id="3a39b-334">This reference contains a query string that includes a hash, which is based on the content of the bundle.</span></span> <span data-ttu-id="3a39b-335">Si cambia el contenido de la unión, también cambiará el código hash generado.</span><span class="sxs-lookup"><span data-stu-id="3a39b-335">If the bundle contents change, the generated hash will also change.</span></span>  

<span data-ttu-id="3a39b-336">De forma predeterminada, las instancias de la red CDN de Azure tienen la opción *Estado de las cadenas de consultas* deshabilitada.</span><span class="sxs-lookup"><span data-stu-id="3a39b-336">By default, Azure CDN instances have the *Query String Status* setting disabled.</span></span> <span data-ttu-id="3a39b-337">Para que las uniones de script actualizadas las controle correctamente la red CDN, debe habilitar la opción *Estado de las cadenas de consultas* para la instancia de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-337">In order for updated script bundles to be handled properly by the CDN, you must enable the *Query String Status* setting for the CDN instance.</span></span> <span data-ttu-id="3a39b-338">Tenga en cuenta que el valor puede tardar una o dos horas en entrar en vigor.</span><span class="sxs-lookup"><span data-stu-id="3a39b-338">Note that it may take an hour or more before the setting takes effect.</span></span>

### <a name="features"></a><span data-ttu-id="3a39b-339">Características</span><span class="sxs-lookup"><span data-stu-id="3a39b-339">Features</span></span>

<span data-ttu-id="3a39b-340">Azure tiene varios productos de CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-340">Azure has several CDN products.</span></span> <span data-ttu-id="3a39b-341">Al seleccionar una red CDN, tenga en cuenta las características que admite cada producto.</span><span class="sxs-lookup"><span data-stu-id="3a39b-341">When selecting a CDN, consider the features that each product supports.</span></span> <span data-ttu-id="3a39b-342">Consulte [Características de Azure CDN] [ cdn-features] para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="3a39b-342">See [Azure CDN Features][cdn-features] for details.</span></span> <span data-ttu-id="3a39b-343">Las características Premium que puede que desee considerar incluyen:</span><span class="sxs-lookup"><span data-stu-id="3a39b-343">Premium features that you may wish to consider include:</span></span>

- <span data-ttu-id="3a39b-344">**[Motor de reglas](/azure/cdn/cdn-rules-engine)**.</span><span class="sxs-lookup"><span data-stu-id="3a39b-344">**[Rules engine](/azure/cdn/cdn-rules-engine)**.</span></span> <span data-ttu-id="3a39b-345">El motor de reglas le permite personalizar cómo se controlan las solicitudes HTTP, tales como el bloqueo de la entrega de determinados tipos de contenido, la definición de una directiva de almacenamiento en caché y la modificación de encabezados HTTP.</span><span class="sxs-lookup"><span data-stu-id="3a39b-345">The rules engine allows you to customize how HTTP requests are handled, such as blocking the delivery of certain types of content, defining a caching policy, and modifying HTTP headers.</span></span> 

- <span data-ttu-id="3a39b-346">**[Estadísticas en tiempo real](/azure/cdn/cdn-real-time-stats)**.</span><span class="sxs-lookup"><span data-stu-id="3a39b-346">**[Real-time statistics](/azure/cdn/cdn-real-time-stats)**.</span></span> <span data-ttu-id="3a39b-347">Supervisa los datos en tiempo real, por ejemplo, el ancho de banda, los estados de la caché y las conexiones simultáneas a su perfil de CDN, entre otros, y recibe [alertas en tiempo real](/azure/cdn/cdn-real-time-alerts).</span><span class="sxs-lookup"><span data-stu-id="3a39b-347">Monitor real-time data, such as bandwidth, cache statuses, and concurrent connections to your CDN profile, and receive [real-time alerts](/azure/cdn/cdn-real-time-alerts).</span></span> 


## <a name="rules-engine-url-rewriting-example"></a><span data-ttu-id="3a39b-348">Ejemplo de reescritura de URL del motor de reglas</span><span class="sxs-lookup"><span data-stu-id="3a39b-348">Rules engine URL rewriting example</span></span>

<span data-ttu-id="3a39b-349">El diagrama siguiente muestra cómo realizar la [reescritura de URL](https://technet.microsoft.com/library/ee215194.aspx) cuando se usa la red CDN.</span><span class="sxs-lookup"><span data-stu-id="3a39b-349">The following diagram demonstrates how to perform [URL rewriting](https://technet.microsoft.com/library/ee215194.aspx) when using the CDN.</span></span> <span data-ttu-id="3a39b-350">Las solicitudes desde la red CDN de contenido almacenado en la caché se redirigen a carpetas concretas de la raíz de la aplicación según el tipo de recurso (por ejemplo, scripts e imágenes).</span><span class="sxs-lookup"><span data-stu-id="3a39b-350">Requests from the CDN for content that is cached are redirected to specific folders within the application root based on the type of the resource (such as scripts and images).</span></span>  

![Diagrama del motor de reglas](./images/cdn/rules-engine.png)

<span data-ttu-id="3a39b-352">Estas reglas de reescritura realizan las siguientes redirecciones:</span><span class="sxs-lookup"><span data-stu-id="3a39b-352">These rewrite rules perform the following redirections:</span></span>

* <span data-ttu-id="3a39b-353">La primera regla permite integrar una versión en el nombre de archivo de un recurso, que luego se omite.</span><span class="sxs-lookup"><span data-stu-id="3a39b-353">The first rule allows you to embed a version in the file name of a resource, which is then ignored.</span></span> <span data-ttu-id="3a39b-354">Por ejemplo, *NombreDeArchivo_v123.jpg* se reescribe como *NombreDeArchivo.jpg*.</span><span class="sxs-lookup"><span data-stu-id="3a39b-354">For example, *Filename_v123.jpg* is rewritten as *Filename.jpg*.</span></span>
* <span data-ttu-id="3a39b-355">Las cuatro reglas siguientes muestran cómo redirigir solicitudes si no se desea almacenar los recursos en una carpeta llamada *cdn** en la raíz del rol web.</span><span class="sxs-lookup"><span data-stu-id="3a39b-355">The next four rules show how to redirect requests if you do not want to store the resources in a folder named *cdn** in the root of the web role.</span></span> <span data-ttu-id="3a39b-356">Las reglas asignan las direcciones URL *cdn/Images*, *cdn/Content*, *cdn/Scripts* y *cdn/bundles* a sus respectivas carpetas raíz en el rol web.</span><span class="sxs-lookup"><span data-stu-id="3a39b-356">The rules map the *cdn/Images*, *cdn/Content*, *cdn/Scripts*, and *cdn/bundles* URLs to their respective root folders in the web role.</span></span>

<span data-ttu-id="3a39b-357">Tenga en cuenta que el uso de la reescritura de URL requiere que se realicen varios cambios en la unión de recursos.</span><span class="sxs-lookup"><span data-stu-id="3a39b-357">Note that using URL rewriting requires you to make some changes to the bundling of resources.</span></span>     

## <a name="more-information"></a><span data-ttu-id="3a39b-358">Más información</span><span class="sxs-lookup"><span data-stu-id="3a39b-358">More information</span></span>
* [<span data-ttu-id="3a39b-359">Red CDN de Azure</span><span class="sxs-lookup"><span data-stu-id="3a39b-359">Azure CDN</span></span>](https://azure.microsoft.com/services/cdn/)
* [<span data-ttu-id="3a39b-360">Documentación de Azure Content Delivery Network (CDN)</span><span class="sxs-lookup"><span data-stu-id="3a39b-360">Azure Content Delivery Network (CDN) Documentation</span></span>](https://azure.microsoft.com/documentation/services/cdn/)
* [<span data-ttu-id="3a39b-361">Uso de CDN de Azure</span><span class="sxs-lookup"><span data-stu-id="3a39b-361">Using Azure CDN</span></span>](/azure/cdn/cdn-create-new-endpoint/)
* <span data-ttu-id="3a39b-362">[Integre un servicio en la nube con Azure CDN](/azure/cdn/cdn-cloud-service-with-cdn/)(https://azure.microsoft.com/blog/2011/03/18/best-practices-for-the-windows-azure-content-delivery-network/)</span><span class="sxs-lookup"><span data-stu-id="3a39b-362">[Integrate a cloud service with Azure CDN](/azure/cdn/cdn-cloud-service-with-cdn/)(https://azure.microsoft.com/blog/2011/03/18/best-practices-for-the-windows-azure-content-delivery-network/)</span></span>


<!-- links -->

[cdn-features]: /azure/cdn/cdn-overview#azure-cdn-features
