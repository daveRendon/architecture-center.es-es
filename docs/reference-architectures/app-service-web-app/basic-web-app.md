---
title: "Aplicación web básica"
description: "Arquitectura recomendada para una aplicación web básica que se ejecuta en Microsoft Azure."
author: MikeWasson
ms.date: 11/23/2016
cardTitle: Basic web application
ms.openlocfilehash: b7475c4087a184bb7608d0c45ffecee912c920d7
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/14/2017
---
# <a name="basic-web-application"></a><span data-ttu-id="385d4-103">Aplicación web básica</span><span class="sxs-lookup"><span data-stu-id="385d4-103">Basic web application</span></span>
[!INCLUDE [header](../../_includes/header.md)]

<span data-ttu-id="385d4-104">Esta arquitectura de referencia muestra un conjunto de prácticas demostradas para una aplicación web que usa [Azure App Service][app-service] y [Azure SQL Database][sql-db].</span><span class="sxs-lookup"><span data-stu-id="385d4-104">This reference architecture shows a set of proven practices for a web application that uses [Azure App Service][app-service] and [Azure SQL Database][sql-db].</span></span> [<span data-ttu-id="385d4-105">**Implemente esta solución.**</span><span class="sxs-lookup"><span data-stu-id="385d4-105">**Deploy this solution.**</span></span>](#deploy-the-solution)

<span data-ttu-id="385d4-106">![[0]][0]</span><span class="sxs-lookup"><span data-stu-id="385d4-106">![[0]][0]</span></span>

<span data-ttu-id="385d4-107">*Descargue un [archivo Visio][visio-download] de esta arquitectura.*</span><span class="sxs-lookup"><span data-stu-id="385d4-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="385d4-108">Arquitectura</span><span class="sxs-lookup"><span data-stu-id="385d4-108">Architecture</span></span> 

> [!NOTE]
> <span data-ttu-id="385d4-109">Esta arquitectura no se centra en el desarrollo de aplicaciones y no supone ningún marco de trabajo de la aplicación concreto.</span><span class="sxs-lookup"><span data-stu-id="385d4-109">This architecture does not focus on application development, and does not assume any particular application framework.</span></span> <span data-ttu-id="385d4-110">El objetivo es comprender cómo encajan entre sí los distintos servicios de Azure.</span><span class="sxs-lookup"><span data-stu-id="385d4-110">The goal is to understand how various Azure services fit together.</span></span>
>
>

<span data-ttu-id="385d4-111">La arquitectura consta de los siguientes componentes:</span><span class="sxs-lookup"><span data-stu-id="385d4-111">The architecture has the following components:</span></span>

* <span data-ttu-id="385d4-112">**Grupo de recursos**.</span><span class="sxs-lookup"><span data-stu-id="385d4-112">**Resource group**.</span></span> <span data-ttu-id="385d4-113">Un [grupo de recursos](/azure/azure-resource-manager/resource-group-overview) es un contenedor lógico de recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="385d4-113">A [resource group](/azure/azure-resource-manager/resource-group-overview) is a logical container for Azure resources.</span></span>
* <span data-ttu-id="385d4-114">**Aplicación de App Service**.</span><span class="sxs-lookup"><span data-stu-id="385d4-114">**App Service app**.</span></span> <span data-ttu-id="385d4-115">[Azure App Service][app-service] es una plataforma completamente administrada para crear e implementar aplicaciones en la nube.</span><span class="sxs-lookup"><span data-stu-id="385d4-115">[Azure App Service][app-service] is a fully managed platform for creating and deploying cloud applications.</span></span>     
* <span data-ttu-id="385d4-116">**Plan de App Service**.</span><span class="sxs-lookup"><span data-stu-id="385d4-116">**App Service plan**.</span></span> <span data-ttu-id="385d4-117">Un [plan de App Service][app-service-plans] proporciona las máquinas virtuales (VM) administradas que hospedan su aplicación.</span><span class="sxs-lookup"><span data-stu-id="385d4-117">An [App Service plan][app-service-plans] provides the managed virtual machines (VMs) that host your app.</span></span> <span data-ttu-id="385d4-118">Todas las aplicaciones asociadas con un plan se ejecutan en las mismas instancias de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="385d4-118">All apps associated with a plan run on the same VM instances.</span></span>

* <span data-ttu-id="385d4-119">**Ranuras de implementación**.</span><span class="sxs-lookup"><span data-stu-id="385d4-119">**Deployment slots**.</span></span>  <span data-ttu-id="385d4-120">Una [ranura de implementación][deployment-slots] permite preconfigurar una implementación y, posteriormente, intercambiarla con la implementación de producción.</span><span class="sxs-lookup"><span data-stu-id="385d4-120">A [deployment slot][deployment-slots] lets you stage a deployment and then swap it with the production deployment.</span></span> <span data-ttu-id="385d4-121">De este modo, evita realizar la implementación directamente en producción.</span><span class="sxs-lookup"><span data-stu-id="385d4-121">That way, you avoid deploying directly into production.</span></span> <span data-ttu-id="385d4-122">Consulte la sección [Manejabilidad](#manageability-considerations) para obtener recomendaciones específicas.</span><span class="sxs-lookup"><span data-stu-id="385d4-122">See the [Manageability](#manageability-considerations) section for specific recommendations.</span></span>

* <span data-ttu-id="385d4-123">**Dirección IP**.</span><span class="sxs-lookup"><span data-stu-id="385d4-123">**IP address**.</span></span> <span data-ttu-id="385d4-124">La aplicación de App Service tiene una dirección IP pública y un nombre de dominio.</span><span class="sxs-lookup"><span data-stu-id="385d4-124">The App Service app has a public IP address and a domain name.</span></span> <span data-ttu-id="385d4-125">El nombre de dominio es un subdominio de `azurewebsites.net`, como `contoso.azurewebsites.net`.</span><span class="sxs-lookup"><span data-stu-id="385d4-125">The domain name is a subdomain of `azurewebsites.net`, such as `contoso.azurewebsites.net`.</span></span> <span data-ttu-id="385d4-126">Para usar un nombre de dominio personalizado, como `contoso.com`, cree registros de servicio de nombre de dominio (DNS) que asignen el nombre de dominio personalizado a la dirección IP.</span><span class="sxs-lookup"><span data-stu-id="385d4-126">To use a custom domain name, such as `contoso.com`, create domain name service (DNS) records that map the custom domain name to the IP address.</span></span> <span data-ttu-id="385d4-127">Para más información, consulte [Configurar un nombre de dominio personalizado en Azure App Service][custom-domain-name].</span><span class="sxs-lookup"><span data-stu-id="385d4-127">For more information, see [Configure a custom domain name in Azure App Service][custom-domain-name].</span></span>
* <span data-ttu-id="385d4-128">**Azure SQL Database**.</span><span class="sxs-lookup"><span data-stu-id="385d4-128">**Azure SQL Database**.</span></span> <span data-ttu-id="385d4-129">[SQL Database][sql-db] es una base de datos como servicio relacional en la nube.</span><span class="sxs-lookup"><span data-stu-id="385d4-129">[SQL Database][sql-db] is a relational database-as-a-service in the cloud.</span></span>
* <span data-ttu-id="385d4-130">**Servidor lógico**.</span><span class="sxs-lookup"><span data-stu-id="385d4-130">**Logical server**.</span></span> <span data-ttu-id="385d4-131">En Azure SQL Database, un servidor lógico hospeda las bases de datos.</span><span class="sxs-lookup"><span data-stu-id="385d4-131">In Azure SQL Database, a logical server hosts your databases.</span></span> <span data-ttu-id="385d4-132">Se pueden crear varias bases de datos por servidor lógico.</span><span class="sxs-lookup"><span data-stu-id="385d4-132">You can create multiple databases per logical server.</span></span>
* <span data-ttu-id="385d4-133">**Azure Storage**.</span><span class="sxs-lookup"><span data-stu-id="385d4-133">**Azure Storage**.</span></span> <span data-ttu-id="385d4-134">Cree una cuenta de almacenamiento de Azure con un contenedor de blobs para almacenar los registros de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="385d4-134">Create an Azure storage account with a blob container to store diagnostic logs.</span></span>
* <span data-ttu-id="385d4-135">**Azure Active Directory** (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="385d4-135">**Azure Active Directory** (Azure AD).</span></span> <span data-ttu-id="385d4-136">Use Azure AD u otro proveedor de identidades para la autenticación.</span><span class="sxs-lookup"><span data-stu-id="385d4-136">Use Azure AD or another identity provider for authentication.</span></span>

## <a name="recommendations"></a><span data-ttu-id="385d4-137">Recomendaciones</span><span class="sxs-lookup"><span data-stu-id="385d4-137">Recommendations</span></span>

<span data-ttu-id="385d4-138">Los requisitos pueden diferir de los de la arquitectura que se describe aquí.</span><span class="sxs-lookup"><span data-stu-id="385d4-138">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="385d4-139">Use las recomendaciones de esta sección como punto de partida.</span><span class="sxs-lookup"><span data-stu-id="385d4-139">Use the recommendations in this section as a starting point.</span></span>

### <a name="app-service-plan"></a><span data-ttu-id="385d4-140">Plan de App Service</span><span class="sxs-lookup"><span data-stu-id="385d4-140">App Service plan</span></span>
<span data-ttu-id="385d4-141">Use los niveles Standard o Premium, ya que admiten las opciones de Escalabilidad horizontal, Escala automática y Capa de sockets seguros (SSL).</span><span class="sxs-lookup"><span data-stu-id="385d4-141">Use the Standard or Premium tiers, because they support scale out, autoscale, and secure sockets layer (SSL).</span></span> <span data-ttu-id="385d4-142">Cada nivel admite varios *tamaños de instancia*, que se diferencian por el número de núcleos y la memoria.</span><span class="sxs-lookup"><span data-stu-id="385d4-142">Each tier supports several *instance sizes* that differ by number of cores and memory.</span></span> <span data-ttu-id="385d4-143">Puede cambiar el nivel o el tamaño de la instancia después de crear un plan.</span><span class="sxs-lookup"><span data-stu-id="385d4-143">You can change the tier or instance size after you create a plan.</span></span> <span data-ttu-id="385d4-144">Para más información sobre los planes de App Service, consulte [Precios de App Service ][app-service-plans-tiers].</span><span class="sxs-lookup"><span data-stu-id="385d4-144">For more information about App Service plans, see [App Service Pricing][app-service-plans-tiers].</span></span>

<span data-ttu-id="385d4-145">Se le cobra por las instancias del plan de App Service, aunque la aplicación esté detenida.</span><span class="sxs-lookup"><span data-stu-id="385d4-145">You are charged for the instances in the App Service plan, even if the app is stopped.</span></span> <span data-ttu-id="385d4-146">Asegúrese de eliminar los planes que no use (por ejemplo, las implementaciones de prueba).</span><span class="sxs-lookup"><span data-stu-id="385d4-146">Make sure to delete plans that you aren't using (for example, test deployments).</span></span>

### <a name="sql-database"></a><span data-ttu-id="385d4-147">SQL Database</span><span class="sxs-lookup"><span data-stu-id="385d4-147">SQL Database</span></span>
<span data-ttu-id="385d4-148">Use la [versión V12][sql-db-v12] de SQL Database.</span><span class="sxs-lookup"><span data-stu-id="385d4-148">Use the [V12 version][sql-db-v12] of SQL Database.</span></span> <span data-ttu-id="385d4-149">SQL Database admite los [niveles de servicio][sql-db-service-tiers] Basic, Standard y Premium, con varios niveles de rendimiento dentro de cada nivel medidos en [unidades de transmisión de datos (DTU)][sql-dtu].</span><span class="sxs-lookup"><span data-stu-id="385d4-149">SQL Database supports Basic, Standard, and Premium [service tiers][sql-db-service-tiers], with multiple performance levels within each tier measured in [Database Transaction Units (DTUs)][sql-dtu].</span></span> <span data-ttu-id="385d4-150">Planee la capacidad, y elija un nivel de servicio y un nivel de rendimiento que se ajusten a sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="385d4-150">Perform capacity planning and choose a tier and performance level that meets your requirements.</span></span>

### <a name="region"></a><span data-ttu-id="385d4-151">Region</span><span class="sxs-lookup"><span data-stu-id="385d4-151">Region</span></span>
<span data-ttu-id="385d4-152">Aprovisione el plan de App Service y la instancia de SQL Database en la misma región para minimizar la latencia de red.</span><span class="sxs-lookup"><span data-stu-id="385d4-152">Provision the App Service plan and the SQL Database in the same region to minimize network latency.</span></span> <span data-ttu-id="385d4-153">Por lo general, elija la región más cercana a los usuarios.</span><span class="sxs-lookup"><span data-stu-id="385d4-153">Generally, choose the region closest to your users.</span></span>

<span data-ttu-id="385d4-154">El grupo de recursos también tiene una región, que especifica dónde se almacenan los metadatos de la implementación.</span><span class="sxs-lookup"><span data-stu-id="385d4-154">The resource group also has a region, which specifies where deployment metadata is stored.</span></span> <span data-ttu-id="385d4-155">Coloque el grupo de recursos y sus recursos en la misma región.</span><span class="sxs-lookup"><span data-stu-id="385d4-155">Put the resource group and its resources in the same region.</span></span> <span data-ttu-id="385d4-156">Esto puede mejorar la disponibilidad durante la implementación.</span><span class="sxs-lookup"><span data-stu-id="385d4-156">This can improve availability during deployment.</span></span> 

## <a name="scalability-considerations"></a><span data-ttu-id="385d4-157">Consideraciones sobre escalabilidad</span><span class="sxs-lookup"><span data-stu-id="385d4-157">Scalability considerations</span></span>

<span data-ttu-id="385d4-158">Una de las ventajas principales de Azure App Service es la posibilidad de escalar la aplicación en función de la carga.</span><span class="sxs-lookup"><span data-stu-id="385d4-158">A major benefit of Azure App Service is the ability to scale your application based on load.</span></span> <span data-ttu-id="385d4-159">Estas son algunas consideraciones que se deben tener en cuenta al planear el escalado de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="385d4-159">Here are some considerations to keep in mind when planning to scale your application.</span></span>

### <a name="scaling-the-app-service-app"></a><span data-ttu-id="385d4-160">Ajuste de escala de la aplicación de App Service</span><span class="sxs-lookup"><span data-stu-id="385d4-160">Scaling the App Service app</span></span>

<span data-ttu-id="385d4-161">Hay dos formas de escalar una aplicación de App Service:</span><span class="sxs-lookup"><span data-stu-id="385d4-161">There are two ways to scale an App Service app:</span></span>

* <span data-ttu-id="385d4-162">*Escalar verticalmente*, que significa cambiar el tamaño de la instancia.</span><span class="sxs-lookup"><span data-stu-id="385d4-162">*Scale up*, which means changing the instance size.</span></span> <span data-ttu-id="385d4-163">El tamaño de la instancia determina la memoria, el número de núcleos y el almacenamiento en cada instancia de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="385d4-163">The instance size determines the memory, number of cores, and storage on each VM instance.</span></span> <span data-ttu-id="385d4-164">La escalabilidad vertical se puede ajustar manualmente cambiando el tamaño de la instancia o el nivel del plan.</span><span class="sxs-lookup"><span data-stu-id="385d4-164">You can scale up manually by changing the instance size or the plan tier.</span></span>  

* <span data-ttu-id="385d4-165">*Escalar horizontalmente*, que significa agregar instancias para controlar el aumento de la carga.</span><span class="sxs-lookup"><span data-stu-id="385d4-165">*Scale out*, which means adding instances to handle increased load.</span></span> <span data-ttu-id="385d4-166">Cada nivel de precios tiene un número máximo de instancias.</span><span class="sxs-lookup"><span data-stu-id="385d4-166">Each pricing tier has a maximum number of instances.</span></span> 

  <span data-ttu-id="385d4-167">La escalabilidad horizontal se puede ajustar manualmente cambiando el recuento de instancias, o bien se puede usar el [escalado automático][web-app-autoscale] para que Azure agregue o quite instancias automáticamente según la programación y/o las métricas de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="385d4-167">You can scale out manually by changing the instance count, or use [autoscaling][web-app-autoscale] to have Azure automatically add or remove instances based on a schedule and/or performance metrics.</span></span> <span data-ttu-id="385d4-168">Cada operación de escala se realiza rápidamente y, normalmente, en unos segundos.</span><span class="sxs-lookup"><span data-stu-id="385d4-168">Each scale operation happens quickly&mdash;typically within seconds.</span></span> 

  <span data-ttu-id="385d4-169">Para habilitar el escalado automático, cree un *perfil* de escalado automático que defina el número mínimo y máximo de instancias.</span><span class="sxs-lookup"><span data-stu-id="385d4-169">To enable autoscaling, create an autoscale *profile* that defines the minimum and maximum number of instances.</span></span> <span data-ttu-id="385d4-170">Los perfiles se pueden programar.</span><span class="sxs-lookup"><span data-stu-id="385d4-170">Profiles can be scheduled.</span></span> <span data-ttu-id="385d4-171">Por ejemplo, podría crear perfiles distintos para los días laborables y los fines de semana.</span><span class="sxs-lookup"><span data-stu-id="385d4-171">For example, you might create separate profiles for weekdays and weekends.</span></span> <span data-ttu-id="385d4-172">De manera opcional, un perfil contiene reglas sobre cuándo agregar o quitar instancias.</span><span class="sxs-lookup"><span data-stu-id="385d4-172">Optionally, a profile contains rules for when to add or remove instances.</span></span> <span data-ttu-id="385d4-173">(Ejemplo: Agregar dos instancias si el uso de la CPU es superior al 70 % durante 5 minutos).</span><span class="sxs-lookup"><span data-stu-id="385d4-173">(Example: Add two instances if CPU usage is above 70% for 5 minutes.)</span></span>
  
<span data-ttu-id="385d4-174">Recomendaciones para el ajuste de escala de una aplicación web:</span><span class="sxs-lookup"><span data-stu-id="385d4-174">Recommendations for scaling a web app:</span></span>

* <span data-ttu-id="385d4-175">En la medida de lo posible, evite la escalabilidad vertical y horizontal, ya que podría desencadenar un reinicio de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="385d4-175">As much as possible, avoid scaling up and down, because it may trigger an application restart.</span></span> <span data-ttu-id="385d4-176">En su lugar, seleccione un nivel y un tamaño que satisfagan sus requisitos de rendimiento con la carga típica y, a continuación, escale horizontalmente las instancias para controlar los cambios en el volumen de tráfico.</span><span class="sxs-lookup"><span data-stu-id="385d4-176">Instead, select a tier and size that meet your performance requirements under typical load and then scale out the instances to handle changes in traffic volume.</span></span>    
* <span data-ttu-id="385d4-177">Habilite el escalado automático.</span><span class="sxs-lookup"><span data-stu-id="385d4-177">Enable autoscaling.</span></span> <span data-ttu-id="385d4-178">Si la aplicación tiene una carga de trabajo normal predecible, cree perfiles para programar los recuentos de instancias con antelación.</span><span class="sxs-lookup"><span data-stu-id="385d4-178">If your application has a predictable, regular workload, create profiles to schedule the instance counts ahead of time.</span></span> <span data-ttu-id="385d4-179">Si la carga de trabajo no es predecible, use el escalado automático basado en reglas para reaccionar a los cambios de carga cuando se produzcan.</span><span class="sxs-lookup"><span data-stu-id="385d4-179">If the workload is not predictable, use rule-based autoscaling to react to changes in load as they occur.</span></span> <span data-ttu-id="385d4-180">Puede combinar ambos enfoques.</span><span class="sxs-lookup"><span data-stu-id="385d4-180">You can combine both approaches.</span></span>
* <span data-ttu-id="385d4-181">El uso de la CPU suele ser una buena métrica para las reglas de escalado automático.</span><span class="sxs-lookup"><span data-stu-id="385d4-181">CPU usage is generally a good metric for autoscale rules.</span></span> <span data-ttu-id="385d4-182">Sin embargo, debería realizar pruebas de carga de la aplicación, identificar posibles cuellos de botella y basar las reglas de escalado automático en esos datos.</span><span class="sxs-lookup"><span data-stu-id="385d4-182">However, you should load test your application, identify potential bottlenecks, and base your autoscale rules on that data.</span></span>  
* <span data-ttu-id="385d4-183">Las reglas de escalado automático incluyen un período de *enfriamiento*, que es el intervalo que se debe esperar una vez completada una acción de ajuste de escala antes de iniciar la siguiente.</span><span class="sxs-lookup"><span data-stu-id="385d4-183">Autoscale rules include a *cool-down* period, which is the interval to wait after a scale action has completed before starting a new scale action.</span></span> <span data-ttu-id="385d4-184">El período de enfriamiento permite que el sistema se estabilice antes de realizar otro ajuste de escala.</span><span class="sxs-lookup"><span data-stu-id="385d4-184">The cool-down period lets the system stabilize before scaling again.</span></span> <span data-ttu-id="385d4-185">Establezca un período de enfriamiento más corto para agregar instancias y uno más prolongado para quitarlas.</span><span class="sxs-lookup"><span data-stu-id="385d4-185">Set a shorter cool-down period for adding instances, and a longer cool-down period for removing instances.</span></span> <span data-ttu-id="385d4-186">Por ejemplo, establezca 5 minutos para agregar una instancia y 60 minutos para quitarla.</span><span class="sxs-lookup"><span data-stu-id="385d4-186">For example, set 5 minutes to add an instance, but 60 minutes to remove an instance.</span></span> <span data-ttu-id="385d4-187">Es mejor agregar nuevas instancias rápidamente bajo una carga intensa para controlar el tráfico adicional y, a continuación, reducir el escalado gradualmente.</span><span class="sxs-lookup"><span data-stu-id="385d4-187">It's better to add new instances quickly under heavy load to handle the additional traffic, and then gradually scale back.</span></span>

### <a name="scaling-sql-database"></a><span data-ttu-id="385d4-188">Ajuste de escala de SQL Database</span><span class="sxs-lookup"><span data-stu-id="385d4-188">Scaling SQL Database</span></span>
<span data-ttu-id="385d4-189">Si necesita un nivel de servicio o de rendimiento superior para SQL Database, puede escalar verticalmente bases de datos individuales sin tiempo de inactividad de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="385d4-189">If you need a higher service tier or performance level for SQL Database, you can scale up individual databases with no application downtime.</span></span> <span data-ttu-id="385d4-190">Si quiere obtener más información, consulte el artículo [Opciones y rendimiento de Base de datos SQL: comprender lo que está disponible en cada nivel de servicio][sql-db-scale].</span><span class="sxs-lookup"><span data-stu-id="385d4-190">For more information, see [SQL Database options and performance: Understand what's available in each service tier][sql-db-scale].</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="385d4-191">Consideraciones sobre disponibilidad</span><span class="sxs-lookup"><span data-stu-id="385d4-191">Availability considerations</span></span>
<span data-ttu-id="385d4-192">En el momento de escribir este artículo, el acuerdo de nivel de servicio (SLA) de App Service es del 99,95 % y el SLA de SQL Database es del 99,99 % para los niveles Basic, Standard y Premium.</span><span class="sxs-lookup"><span data-stu-id="385d4-192">At the time of writing, the service level agreement (SLA) for App Service is 99.95% and the SLA for SQL Database is 99.99% for Basic, Standard, and Premium tiers.</span></span> 

> [!NOTE]
> <span data-ttu-id="385d4-193">El SLA de App Service se aplica tanto a instancias únicas como múltiples.</span><span class="sxs-lookup"><span data-stu-id="385d4-193">The App Service SLA applies to both single and multiple instances.</span></span>  
>
>

### <a name="backups"></a><span data-ttu-id="385d4-194">Copias de seguridad</span><span class="sxs-lookup"><span data-stu-id="385d4-194">Backups</span></span>
<span data-ttu-id="385d4-195">En caso de pérdida de datos, SQL Database proporciona restauración a un momento dado y restauración geográfica.</span><span class="sxs-lookup"><span data-stu-id="385d4-195">In the event of data loss, SQL Database provides point-in-time restore and geo-restore.</span></span> <span data-ttu-id="385d4-196">Estas características están disponibles en todos los niveles y se habilitan automáticamente.</span><span class="sxs-lookup"><span data-stu-id="385d4-196">These features are available in all tiers and are automatically enabled.</span></span> <span data-ttu-id="385d4-197">No es necesario programar ni administrar las copias de seguridad.</span><span class="sxs-lookup"><span data-stu-id="385d4-197">You don't need to schedule or manage the backups.</span></span> 

- <span data-ttu-id="385d4-198">Use la restauración a un momento dado para la [recuperación de un error humano][sql-human-error] mediante el restablecimiento de la base de datos a un momento anterior en el tiempo.</span><span class="sxs-lookup"><span data-stu-id="385d4-198">Use point-in-time restore to [recover from human error][sql-human-error] by returning the database to an earlier point in time.</span></span> 
- <span data-ttu-id="385d4-199">Use la restauración geográfica para la [recuperación de una interrupción del servicio][sql-outage-recovery] mediante la restauración de una base de datos a partir de una copia de seguridad con redundancia geográfica.</span><span class="sxs-lookup"><span data-stu-id="385d4-199">Use geo-restore to [recover from a service outage][sql-outage-recovery] by restoring a database from a geo-redundant backup.</span></span> 

<span data-ttu-id="385d4-200">Para más información, consulte el tema sobre la [continuidad del negocio en la nube y la recuperación ante desastres de la base datos con SQL Database][sql-backup].</span><span class="sxs-lookup"><span data-stu-id="385d4-200">For more information, see [Cloud business continuity and database disaster recovery with SQL Database][sql-backup].</span></span>

<span data-ttu-id="385d4-201">App Service proporciona una característica de [copia de seguridad y restauración][web-app-backup] para los archivos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="385d4-201">App Service provides a [backup and restore][web-app-backup] feature for your application files.</span></span> <span data-ttu-id="385d4-202">Sin embargo, tenga en cuenta que los archivos de los que se realiza la copia de seguridad incluyen la configuración de la aplicación en texto sin formato y pueden incluir información confidencial, como cadenas de conexión.</span><span class="sxs-lookup"><span data-stu-id="385d4-202">However, be aware that the backed-up files include app settings in plain text and these may include secrets, such as connection strings.</span></span> <span data-ttu-id="385d4-203">Evite usar la característica de copia de seguridad de App Service para realizar una copia de seguridad de las bases de datos SQL, ya que exporta la base de datos a un archivo .bacpac de SQL, que consume unidades [DTU][sql-dtu].</span><span class="sxs-lookup"><span data-stu-id="385d4-203">Avoid using the App Service backup feature to back up your SQL databases because it exports the database to a SQL .bacpac file, consuming [DTUs][sql-dtu].</span></span> <span data-ttu-id="385d4-204">En su lugar, use la restauración a un momento dado de SQL Database descrita anteriormente.</span><span class="sxs-lookup"><span data-stu-id="385d4-204">Instead, use SQL Database point-in-time restore described above.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="385d4-205">Consideraciones sobre la manejabilidad</span><span class="sxs-lookup"><span data-stu-id="385d4-205">Manageability considerations</span></span>
<span data-ttu-id="385d4-206">Cree grupos de recursos independientes para los entornos de producción, desarrollo y pruebas.</span><span class="sxs-lookup"><span data-stu-id="385d4-206">Create separate resource groups for production, development, and test environments.</span></span> <span data-ttu-id="385d4-207">Esto facilita la administración de implementaciones, la eliminación de implementaciones de prueba y la asignación de derechos de acceso.</span><span class="sxs-lookup"><span data-stu-id="385d4-207">This makes it easier to manage deployments, delete test deployments, and assign access rights.</span></span>

<span data-ttu-id="385d4-208">Al asignar recursos a grupos de recursos, tenga en cuenta lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="385d4-208">When assigning resources to resource groups, consider the following:</span></span>

* <span data-ttu-id="385d4-209">Ciclo de vida.</span><span class="sxs-lookup"><span data-stu-id="385d4-209">Lifecycle.</span></span> <span data-ttu-id="385d4-210">En general, coloque los recursos con el mismo ciclo de vida en el mismo grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="385d4-210">In general, put resources with the same lifecycle into the same resource group.</span></span>
* <span data-ttu-id="385d4-211">Acceso.</span><span class="sxs-lookup"><span data-stu-id="385d4-211">Access.</span></span> <span data-ttu-id="385d4-212">Puede usar el [control de acceso basado en rol][rbac] (RBAC) para aplicar directivas de acceso a los recursos de un grupo.</span><span class="sxs-lookup"><span data-stu-id="385d4-212">You can use [role-based access control][rbac] (RBAC) to apply access policies to the resources in a group.</span></span>
* <span data-ttu-id="385d4-213">Facturación.</span><span class="sxs-lookup"><span data-stu-id="385d4-213">Billing.</span></span> <span data-ttu-id="385d4-214">Puede ver los costes acumulados del grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="385d4-214">You can view the rolled-up costs for the resource group.</span></span>  

<span data-ttu-id="385d4-215">Para más información, consulte [Información general de Azure Resource Manager](/azure/azure-resource-manager/resource-group-overview).</span><span class="sxs-lookup"><span data-stu-id="385d4-215">For more information, see [Azure Resource Manager overview](/azure/azure-resource-manager/resource-group-overview).</span></span>

### <a name="deployment"></a><span data-ttu-id="385d4-216">Implementación</span><span class="sxs-lookup"><span data-stu-id="385d4-216">Deployment</span></span>
<span data-ttu-id="385d4-217">La implementación implica dos pasos:</span><span class="sxs-lookup"><span data-stu-id="385d4-217">Deployment involves two steps:</span></span>

1. <span data-ttu-id="385d4-218">Aprovisionamiento de los recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="385d4-218">Provisioning the Azure resources.</span></span> <span data-ttu-id="385d4-219">Se recomienda usar las [plantillas de Azure Resource Manager][arm-template] para este paso.</span><span class="sxs-lookup"><span data-stu-id="385d4-219">We recommend that you use [Azure Resoure Manager templates][arm-template] for this step.</span></span> <span data-ttu-id="385d4-220">Las plantillas facilitan la automatización de las implementaciones a través de PowerShell o de la interfaz de línea de comandos (CLI) de Azure.</span><span class="sxs-lookup"><span data-stu-id="385d4-220">Templates make it easier to automate deployments via PowerShell or the Azure command line interface (CLI).</span></span>
2. <span data-ttu-id="385d4-221">Implementación de la aplicación (código, archivos binarios y archivos de contenido).</span><span class="sxs-lookup"><span data-stu-id="385d4-221">Deploying the application (code, binaries, and content files).</span></span> <span data-ttu-id="385d4-222">Tiene varias opciones, incluida la implementación desde un repositorio de Git local, mediante Visual Studio, o bien la implementación continua desde el control de código fuente basado en la nube.</span><span class="sxs-lookup"><span data-stu-id="385d4-222">You have several options, including deploying from a local Git repository, using Visual Studio, or continuous deployment from cloud-based source control.</span></span> <span data-ttu-id="385d4-223">Consulte [Implementación de la aplicación en Azure App Service][deploy].</span><span class="sxs-lookup"><span data-stu-id="385d4-223">See [Deploy your app to Azure App Service][deploy].</span></span>  

<span data-ttu-id="385d4-224">Una aplicación de App Service siempre tiene una ranura de implementación denominada `production`, que representa el sitio de producción en vivo.</span><span class="sxs-lookup"><span data-stu-id="385d4-224">An App Service app always has one deployment slot named `production`, which represents the live production site.</span></span> <span data-ttu-id="385d4-225">Se recomienda crear un espacio de ensayo para la implementación de actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="385d4-225">We recommend creating a staging slot for deploying updates.</span></span> <span data-ttu-id="385d4-226">Las ventajas de usar un espacio de ensayo incluyen:</span><span class="sxs-lookup"><span data-stu-id="385d4-226">The benefits of using a staging slot include:</span></span>

* <span data-ttu-id="385d4-227">Puede comprobar si la implementación finalizó correctamente antes de pasarla a producción.</span><span class="sxs-lookup"><span data-stu-id="385d4-227">You can verify the deployment succeeded, before swapping it into production.</span></span>
* <span data-ttu-id="385d4-228">La implementación en un espacio de ensayo garantiza que todas las instancias estén preparadas antes de pasarlas a producción.</span><span class="sxs-lookup"><span data-stu-id="385d4-228">Deploying to a staging slot ensures that all instances are warmed up before being swapped into production.</span></span> <span data-ttu-id="385d4-229">Muchas aplicaciones presentan tiempos de preparación y arranque en frío considerables.</span><span class="sxs-lookup"><span data-stu-id="385d4-229">Many applications have a significant warmup and cold-start time.</span></span>

<span data-ttu-id="385d4-230">También se recomienda crear un tercer espacio que contendrá la última implementación correcta conocida.</span><span class="sxs-lookup"><span data-stu-id="385d4-230">We also recommend creating a third slot to hold the last-known-good deployment.</span></span> <span data-ttu-id="385d4-231">Después de intercambiar ensayo y producción, mueva la implementación de producción anterior (que ahora está en la fase de ensayo) en el último espacio correcto conocido.</span><span class="sxs-lookup"><span data-stu-id="385d4-231">After you swap staging and production, move the previous production deployment (which is now in staging) into the last-known-good slot.</span></span> <span data-ttu-id="385d4-232">De este modo, si detecta un problema más tarde, puede revertir rápidamente a la última versión correcta conocida.</span><span class="sxs-lookup"><span data-stu-id="385d4-232">That way, if you discover a problem later, you can quickly revert to the last-known-good version.</span></span>

<span data-ttu-id="385d4-233">![[1]][1]</span><span class="sxs-lookup"><span data-stu-id="385d4-233">![[1]][1]</span></span>

<span data-ttu-id="385d4-234">Si realiza la reversión a una versión anterior, asegúrese de que los cambios del esquema de base de datos sean compatibles con versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="385d4-234">If you revert to a previous version, make sure any database schema changes are backward compatible.</span></span>

<span data-ttu-id="385d4-235">No use espacios en la implementación de producción para pruebas, ya que todas las aplicaciones del mismo plan de App Service comparten las mismas instancias de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="385d4-235">Don't use slots on your production deployment for testing because all apps within the same App Service plan share the same VM instances.</span></span> <span data-ttu-id="385d4-236">Por ejemplo, las pruebas de carga pueden degradar el sitio de producción en vivo.</span><span class="sxs-lookup"><span data-stu-id="385d4-236">For example, load tests might degrade the live production site.</span></span> <span data-ttu-id="385d4-237">En su lugar, use planes de App Service independientes para producción y prueba.</span><span class="sxs-lookup"><span data-stu-id="385d4-237">Instead, create separate App Service plans for production and test.</span></span> <span data-ttu-id="385d4-238">Al colocar las implementaciones de prueba en un plan independiente, se aíslan de la versión de producción.</span><span class="sxs-lookup"><span data-stu-id="385d4-238">By putting test deployments into a separate plan, you isolate them from the production version.</span></span>

### <a name="configuration"></a><span data-ttu-id="385d4-239">Configuración</span><span class="sxs-lookup"><span data-stu-id="385d4-239">Configuration</span></span>
<span data-ttu-id="385d4-240">Almacene los valores de configuración como [valores de configuración de la aplicación][app-settings].</span><span class="sxs-lookup"><span data-stu-id="385d4-240">Store configuration settings as [app settings][app-settings].</span></span> <span data-ttu-id="385d4-241">Defina la configuración de la aplicación en las plantillas de Resource Manager, o bien mediante PowerShell.</span><span class="sxs-lookup"><span data-stu-id="385d4-241">Define the app settings in your Resource Manager templates, or using PowerShell.</span></span> <span data-ttu-id="385d4-242">En tiempo de ejecución, la configuración de la aplicación está disponible para la aplicación en forma de variables de entorno.</span><span class="sxs-lookup"><span data-stu-id="385d4-242">At runtime, app settings are available to the application as environment variables.</span></span>

<span data-ttu-id="385d4-243">Nunca compruebe contraseñas, claves de acceso ni cadenas de conexión en el control de código fuente.</span><span class="sxs-lookup"><span data-stu-id="385d4-243">Never check passwords, access keys, or connection strings into source control.</span></span> <span data-ttu-id="385d4-244">En su lugar, páselas como parámetros a un script de implementación que almacene estos valores como valores de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="385d4-244">Instead, pass these as parameters to a deployment script that stores these values as app settings.</span></span>

<span data-ttu-id="385d4-245">Cuando intercambia una ranura de implementación, los valores de configuración de la aplicación se intercambian de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="385d4-245">When you swap a deployment slot, the app settings are swapped by default.</span></span> <span data-ttu-id="385d4-246">Si necesita una configuración diferente para producción y ensayo, puede crear configuraciones de la aplicación que se ciñan a un espacio y no se intercambien.</span><span class="sxs-lookup"><span data-stu-id="385d4-246">If you need different settings for production and staging, you can create app settings that stick to a slot and don't get swapped.</span></span>

### <a name="diagnostics-and-monitoring"></a><span data-ttu-id="385d4-247">Diagnóstico y supervisión</span><span class="sxs-lookup"><span data-stu-id="385d4-247">Diagnostics and monitoring</span></span>
<span data-ttu-id="385d4-248">Habilite el [registro de diagnóstico][diagnostic-logs], incluido el registro de aplicaciones y el registro del servidor web.</span><span class="sxs-lookup"><span data-stu-id="385d4-248">Enable [diagnostics logging][diagnostic-logs], including application logging and web server logging.</span></span> <span data-ttu-id="385d4-249">Configure el registro para usar Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="385d4-249">Configure logging to use Blob storage.</span></span> <span data-ttu-id="385d4-250">Con fines de rendimiento, cree una cuenta de almacenamiento independiente para contener los registros de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="385d4-250">For performance reasons, create a separate storage account for diagnostic logs.</span></span> <span data-ttu-id="385d4-251">No use la misma cuenta de almacenamiento para los registros y los datos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="385d4-251">Don't use the same storage account for logs and application data.</span></span> <span data-ttu-id="385d4-252">Para obtener más instrucciones sobre el registro, consulte la [Guía de supervisión y diagnóstico][monitoring-guidance].</span><span class="sxs-lookup"><span data-stu-id="385d4-252">For more detailed guidance on logging, see [Monitoring and diagnostics guidance][monitoring-guidance].</span></span>

<span data-ttu-id="385d4-253">Use un servicio como [New Relic][new-relic] o [Application Insights][app-insights] para supervisar el rendimiento de la aplicación y el comportamiento sometido a carga.</span><span class="sxs-lookup"><span data-stu-id="385d4-253">Use a service such as [New Relic][new-relic] or [Application Insights][app-insights] to monitor application performance and behavior under load.</span></span> <span data-ttu-id="385d4-254">Tenga en cuenta los [límites de velocidad de datos][app-insights-data-rate] de Application Insights.</span><span class="sxs-lookup"><span data-stu-id="385d4-254">Be aware of the [data rate limits][app-insights-data-rate] for Application Insights.</span></span>

<span data-ttu-id="385d4-255">Realice pruebas de carga mediante una herramienta como [Visual Studio Team Services][vsts].</span><span class="sxs-lookup"><span data-stu-id="385d4-255">Perform load testing, using a tool such as [Visual Studio Team Services][vsts].</span></span> <span data-ttu-id="385d4-256">Para obtener una introducción general del análisis del rendimiento de las aplicaciones en la nube, consulte [Performance Analysis Primer][perf-analysis] (Manual básico de análisis del rendimiento).</span><span class="sxs-lookup"><span data-stu-id="385d4-256">For a general overview of performance analysis in cloud applications, see [Performance Analysis Primer][perf-analysis].</span></span>

<span data-ttu-id="385d4-257">Sugerencias para solucionar problemas de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="385d4-257">Tips for troubleshooting your application:</span></span>

* <span data-ttu-id="385d4-258">Use la [hoja de solución de problemas][troubleshoot-blade] de Azure Portal para buscar soluciones a problemas comunes.</span><span class="sxs-lookup"><span data-stu-id="385d4-258">Use the [troubleshoot blade][troubleshoot-blade] in the Azure portal to find solutions to common problems.</span></span>
* <span data-ttu-id="385d4-259">Habilite [Secuencias de registro][web-app-log-stream] para ver la información de registro prácticamente en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="385d4-259">Enable [log streaming][web-app-log-stream] to see logging information in near-real time.</span></span>
* <span data-ttu-id="385d4-260">El [panel Kudu][kudu] dispone de varias herramientas para supervisar y depurar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="385d4-260">The [Kudu dashboard][kudu] has several tools for monitoring and debugging your application.</span></span> <span data-ttu-id="385d4-261">Para obtener más información, consulte [Azure Websites online tools you should know about][kudu] [Herramientas en línea de Azure Websites que debe conocer (entrada de blog)].</span><span class="sxs-lookup"><span data-stu-id="385d4-261">For more information, see [Azure Websites online tools you should know about][kudu] (blog post).</span></span> <span data-ttu-id="385d4-262">Puede acceder al panel Kudu desde Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="385d4-262">You can reach the Kudu dashboard from the Azure portal.</span></span> <span data-ttu-id="385d4-263">Abra la hoja de su aplicación y haga clic en **Herramientas**; a continuación, haga clic en **Kudu**.</span><span class="sxs-lookup"><span data-stu-id="385d4-263">Open the blade for your app and click **Tools**, then click **Kudu**.</span></span>
* <span data-ttu-id="385d4-264">Si usa Visual Studio, consulte el artículo [Solución de problemas de una aplicación web en Azure App Service con Visual Studio][troubleshoot-web-app] para obtener sugerencias de depuración y solución de problemas.</span><span class="sxs-lookup"><span data-stu-id="385d4-264">If you use Visual Studio, see the article [Troubleshoot a web app in Azure App Service using Visual Studio][troubleshoot-web-app] for debugging and troubleshooting tips.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="385d4-265">Consideraciones sobre la seguridad</span><span class="sxs-lookup"><span data-stu-id="385d4-265">Security considerations</span></span>
<span data-ttu-id="385d4-266">En esta sección se enumeran las consideraciones de seguridad que son específicas de los servicios de Azure descritos en este artículo.</span><span class="sxs-lookup"><span data-stu-id="385d4-266">This section lists security considerations that are specific to the Azure services described in this article.</span></span> <span data-ttu-id="385d4-267">No es una lista completa de procedimientos de seguridad recomendados.</span><span class="sxs-lookup"><span data-stu-id="385d4-267">It's not a complete list of security best practices.</span></span> <span data-ttu-id="385d4-268">Si desea conocer algunas otras consideraciones de seguridad, consulte [Protección de una aplicación en Azure App Service][app-service-security].</span><span class="sxs-lookup"><span data-stu-id="385d4-268">For some additional security considerations, see [Secure an app in Azure App Service][app-service-security].</span></span>

### <a name="sql-database-auditing"></a><span data-ttu-id="385d4-269">Auditoría de SQL Database</span><span class="sxs-lookup"><span data-stu-id="385d4-269">SQL Database auditing</span></span>
<span data-ttu-id="385d4-270">La auditoría puede ayudarle a mantener el cumplimiento de normativas, y a conocer las discrepancias y anomalías que pueden indicar problemas en el negocio o infracciones de seguridad sospechosas.</span><span class="sxs-lookup"><span data-stu-id="385d4-270">Auditing can help you maintain regulatory compliance and get insight into discrepancies and irregularities that could indicate business concerns or suspected security violations.</span></span> <span data-ttu-id="385d4-271">Consulte [Introducción a la auditoría de SQL Database][sql-audit].</span><span class="sxs-lookup"><span data-stu-id="385d4-271">See [Get started with SQL database auditing][sql-audit].</span></span>

### <a name="deployment-slots"></a><span data-ttu-id="385d4-272">Ranuras de implementación</span><span class="sxs-lookup"><span data-stu-id="385d4-272">Deployment slots</span></span>
<span data-ttu-id="385d4-273">Cada ranura de implementación tiene una dirección IP pública.</span><span class="sxs-lookup"><span data-stu-id="385d4-273">Each deployment slot has a public IP address.</span></span> <span data-ttu-id="385d4-274">Proteja los espacios que no sean de producción mediante el [inicio de sesión de Azure Active Directory][aad-auth] para que solo los miembros de los equipos de desarrollo y DevOps puedan acceder a esos puntos de conexión.</span><span class="sxs-lookup"><span data-stu-id="385d4-274">Secure the nonproduction slots using [Azure Active Directory login][aad-auth] so that only members of your development and DevOps teams can reach those endpoints.</span></span>

### <a name="logging"></a><span data-ttu-id="385d4-275">Registro</span><span class="sxs-lookup"><span data-stu-id="385d4-275">Logging</span></span>
<span data-ttu-id="385d4-276">Los registros nunca deben registrar las contraseñas de los usuarios ni otra información que pudiera utilizarse para cometer fraudes de identidad.</span><span class="sxs-lookup"><span data-stu-id="385d4-276">Logs should never record users' passwords or other information that might be used to commit identity fraud.</span></span> <span data-ttu-id="385d4-277">Borre esos detalles de los datos antes de almacenarlos.</span><span class="sxs-lookup"><span data-stu-id="385d4-277">Scrub those details from the data before storing it.</span></span>   

### <a name="ssl"></a><span data-ttu-id="385d4-278">SSL</span><span class="sxs-lookup"><span data-stu-id="385d4-278">SSL</span></span>
<span data-ttu-id="385d4-279">Una aplicación de App Service incluye un punto de conexión SSL en un subdominio de `azurewebsites.net` sin costo adicional alguno.</span><span class="sxs-lookup"><span data-stu-id="385d4-279">An App Service app includes an SSL endpoint on a subdomain of `azurewebsites.net` at no additional cost.</span></span> <span data-ttu-id="385d4-280">El punto de conexión SSL incluye un certificado comodín para el dominio `*.azurewebsites.net`.</span><span class="sxs-lookup"><span data-stu-id="385d4-280">The SSL endpoint includes a wildcard certificate for the `*.azurewebsites.net` domain.</span></span> <span data-ttu-id="385d4-281">Si usa un nombre de dominio personalizado, debe proporcionar un certificado que coincida con el dominio personalizado.</span><span class="sxs-lookup"><span data-stu-id="385d4-281">If you use a custom domain name, you must provide a certificate that matches the custom domain.</span></span> <span data-ttu-id="385d4-282">El enfoque más sencillo consiste en adquirir un certificado directamente a través de Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="385d4-282">The simplest approach is to buy a certificate directly through the Azure portal.</span></span> <span data-ttu-id="385d4-283">También puede importar certificados de otras entidades emisoras de certificados.</span><span class="sxs-lookup"><span data-stu-id="385d4-283">You can also import certificates from other certificate authorities.</span></span> <span data-ttu-id="385d4-284">Para obtener más información, consulte [Compra y configuración de un certificado SSL para el Servicio de aplicaciones de Azure][ssl-cert].</span><span class="sxs-lookup"><span data-stu-id="385d4-284">For more information, see [Buy and Configure an SSL Certificate for your Azure App Service][ssl-cert].</span></span>

<span data-ttu-id="385d4-285">Como procedimiento recomendado de seguridad, la aplicación debe exigir HTTPS mediante el redireccionamiento de las solicitudes HTTP.</span><span class="sxs-lookup"><span data-stu-id="385d4-285">As a security best practice, your app should enforce HTTPS by redirecting HTTP requests.</span></span> <span data-ttu-id="385d4-286">Puede hacerlo dentro de la aplicación o usar una regla de reescritura de direcciones URL como se describe en [Habilitación de HTTPS para una aplicación en Azure App Service][ssl-redirect].</span><span class="sxs-lookup"><span data-stu-id="385d4-286">You can implement this inside your application or use a URL rewrite rule as described in [Enable HTTPS for an app in Azure App Service][ssl-redirect].</span></span>

### <a name="authentication"></a><span data-ttu-id="385d4-287">Autenticación</span><span class="sxs-lookup"><span data-stu-id="385d4-287">Authentication</span></span>
<span data-ttu-id="385d4-288">Se recomienda realizar la autenticación a través de un proveedor de identidades (IDP), como Azure AD, Facebook, Google o Twitter.</span><span class="sxs-lookup"><span data-stu-id="385d4-288">We recommend authenticating through an identity provider (IDP), such as Azure AD, Facebook, Google, or Twitter.</span></span> <span data-ttu-id="385d4-289">Use OAuth 2 u OpenID Connect (OIDC) para el flujo de autenticación.</span><span class="sxs-lookup"><span data-stu-id="385d4-289">Use OAuth 2 or OpenID Connect (OIDC) for the authentication flow.</span></span> <span data-ttu-id="385d4-290">Azure AD proporciona funcionalidad para administrar usuarios y grupos, crear roles de aplicación, integrar las identidades locales y consumir servicios de back-end, como Office 365 y Skype Empresarial.</span><span class="sxs-lookup"><span data-stu-id="385d4-290">Azure AD provides functionality to manage users and groups, create application roles, integrate your on-premises identities, and consume backend services such as Office 365 and Skype for Business.</span></span>

<span data-ttu-id="385d4-291">Evite que la aplicación administre credenciales e inicios de sesión de usuario directamente, ya que podría crear una superficie expuesta a ataques.</span><span class="sxs-lookup"><span data-stu-id="385d4-291">Avoid having the application manage user logins and credentials directly, as it creates a potential attack surface.</span></span>  <span data-ttu-id="385d4-292">Como mínimo, debería tener confirmación por correo electrónico, recuperación de contraseñas y autenticación multifactor; validar la seguridad de la contraseña; y almacenar hashes de contraseña de forma segura.</span><span class="sxs-lookup"><span data-stu-id="385d4-292">At a minimum, you would need to have email confirmation, password recovery, and multi-factor authentication; validate password strength; and store password hashes securely.</span></span> <span data-ttu-id="385d4-293">Los proveedores de identidades importantes controlan todas esas cosas por usted, y supervisan y mejoran constantemente sus prácticas de seguridad.</span><span class="sxs-lookup"><span data-stu-id="385d4-293">The large identity providers handle all of those things for you, and are constantly monitoring and improving their security practices.</span></span>

<span data-ttu-id="385d4-294">Considere usar la [autenticación de App Service][app-service-auth] para implementar el flujo de autenticación de OAuth/OIDC.</span><span class="sxs-lookup"><span data-stu-id="385d4-294">Consider using [App Service authentication][app-service-auth] to implement the OAuth/OIDC authentication flow.</span></span> <span data-ttu-id="385d4-295">Las ventajas de la autenticación del App Service incluyen:</span><span class="sxs-lookup"><span data-stu-id="385d4-295">The benefits of App Service authentication include:</span></span>

* <span data-ttu-id="385d4-296">Es fácil de configurar.</span><span class="sxs-lookup"><span data-stu-id="385d4-296">Easy to configure.</span></span>
* <span data-ttu-id="385d4-297">No se requiere ningún código para los escenarios de autenticación simples.</span><span class="sxs-lookup"><span data-stu-id="385d4-297">No code is required for simple authentication scenarios.</span></span>
* <span data-ttu-id="385d4-298">Admite la autorización delegada mediante tokens de acceso de OAuth para consumir recursos en nombre del usuario.</span><span class="sxs-lookup"><span data-stu-id="385d4-298">Supports delegated authorization using OAuth access tokens to consume resources on behalf of the user.</span></span>
* <span data-ttu-id="385d4-299">Proporciona una memoria caché de tokens integrada.</span><span class="sxs-lookup"><span data-stu-id="385d4-299">Provides a built-in token cache.</span></span>

<span data-ttu-id="385d4-300">Algunas limitaciones de la autenticación de App Service:</span><span class="sxs-lookup"><span data-stu-id="385d4-300">Some limitations of App Service authentication:</span></span>  

* <span data-ttu-id="385d4-301">Opciones de personalización limitadas.</span><span class="sxs-lookup"><span data-stu-id="385d4-301">Limited customization options.</span></span>
* <span data-ttu-id="385d4-302">La autorización delegada está restringida a un recurso de back-end por cada sesión de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="385d4-302">Delegated authorization is restricted to one backend resource per login session.</span></span>
* <span data-ttu-id="385d4-303">Si usa más de un IDP, no hay ningún mecanismo integrado para la detección del dominio de inicio.</span><span class="sxs-lookup"><span data-stu-id="385d4-303">If you use more than one IDP, there is no built-in mechanism for home realm discovery.</span></span>
* <span data-ttu-id="385d4-304">Para los escenarios multiinquilino, la aplicación debe implementar la lógica para validar el emisor del token.</span><span class="sxs-lookup"><span data-stu-id="385d4-304">For multi-tenant scenarios, the application must implement the logic to validate the token issuer.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="385d4-305">Implementación de la solución</span><span class="sxs-lookup"><span data-stu-id="385d4-305">Deploy the solution</span></span>
<span data-ttu-id="385d4-306">Un ejemplo de plantilla de Resource Manager para esta arquitectura está [disponible en GitHub][paas-basic-arm-template].</span><span class="sxs-lookup"><span data-stu-id="385d4-306">An example Resoure Manager template for this architecture is [available on GitHub][paas-basic-arm-template].</span></span>

<span data-ttu-id="385d4-307">Para implementar la plantilla mediante PowerShell, ejecute los siguientes comandos:</span><span class="sxs-lookup"><span data-stu-id="385d4-307">To deploy the template using PowerShell, run the following commands:</span></span>

```
New-AzureRmResourceGroup -Name <resource-group-name> -Location "West US"

$parameters = @{"appName"="<app-name>";"environment"="dev";"locationShort"="uw";"databaseName"="app-db";"administratorLogin"="<admin>";"administratorLoginPassword"="<password>"}

New-AzureRmResourceGroupDeployment -Name <deployment-name> -ResourceGroupName <resource-group-name> -TemplateFile .\PaaS-Basic.json -TemplateParameterObject  $parameters
```

<span data-ttu-id="385d4-308">Para más información, consulte [Implementación de recursos con las plantillas de Azure Resource Manager][deploy-arm-template].</span><span class="sxs-lookup"><span data-stu-id="385d4-308">For more information, see [Deploy resources with Azure Resource Manager templates][deploy-arm-template].</span></span>

<!-- links -->

[aad-auth]: /azure/app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication
[app-insights]: /azure/application-insights/app-insights-overview
[app-insights-data-rate]: /azure/application-insights/app-insights-pricing
[app-service]: https://azure.microsoft.com/documentation/services/app-service/
[app-service-auth]: /azure/app-service-api/app-service-api-authentication
[app-service-plans]: /azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview
[app-service-plans-tiers]: https://azure.microsoft.com/pricing/details/app-service/
[app-service-security]: /azure/app-service-web/web-sites-security
[app-settings]: /azure/app-service-web/web-sites-configure
[arm-template]: /azure/azure-resource-manager/resource-group-overview#resource-groups
[custom-domain-name]: /azure/app-service-web/web-sites-custom-domain-name
[deploy]: /azure/app-service-web/web-sites-deploy
[deploy-arm-template]: /azure/resource-group-template-deploy
[deployment-slots]: /azure/app-service-web/web-sites-staged-publishing
[diagnostic-logs]: /azure/app-service-web/web-sites-enable-diagnostic-log
[kudu]: https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/
[monitoring-guidance]: ../../best-practices/monitoring.md
[new-relic]: http://newrelic.com/
[paas-basic-arm-template]: https://github.com/mspnp/reference-architectures/tree/master/app-service-web-app/basic-web-app/Paas-Basic/Templates
[perf-analysis]: https://github.com/mspnp/performance-optimization/blob/master/Performance-Analysis-Primer.md
[rbac]: /azure/active-directory/role-based-access-control-what-is
[resource-group]: /azure/azure-resource-manager/resource-group-overview
[sla]: https://azure.microsoft.com/support/legal/sla/
[sql-audit]: /azure/sql-database/sql-database-auditing-get-started
[sql-backup]: /azure/sql-database/sql-database-business-continuity
[sql-db]: https://azure.microsoft.com/documentation/services/sql-database/
[sql-db-overview]: /azure/sql-database/sql-database-technical-overview
[sql-db-scale]: /azure/sql-database/sql-database-service-tiers#scaling-up-or-scaling-down-a-single-database
[sql-db-service-tiers]: /azure/sql-database/sql-database-service-tiers
[sql-db-v12]: /azure/sql-database/sql-database-features
[sql-dtu]: /azure/sql-database/sql-database-service-tiers
[sql-human-error]: /azure/sql-database/sql-database-business-continuity#recover-a-database-after-a-user-or-application-error
[sql-outage-recovery]: /azure/sql-database/sql-database-business-continuity#recover-a-database-to-another-region-from-an-azure-regional-data-center-outage
[ssl-redirect]: /azure/app-service-web/web-sites-configure-ssl-certificate#bkmk_enforce
[sql-resource-limits]: /azure/sql-database/sql-database-resource-limits
[ssl-cert]: /azure/app-service-web/web-sites-purchase-ssl-web-site
[troubleshoot-blade]: https://azure.microsoft.com/updates/self-service-troubleshooting-for-app-service-web-apps-customers/
[troubleshoot-web-app]: /azure/app-service-web/web-sites-dotnet-troubleshoot-visual-studio
[visio-download]: https://archcenter.azureedge.net/cdn/app-service-reference-architectures.vsdx
[vsts]: https://www.visualstudio.com/features/vso-cloud-load-testing-vs.aspx
[web-app-autoscale]: /azure/app-service-web/web-sites-scale
[web-app-backup]: /azure/app-service-web/web-sites-backup
[web-app-log-stream]: /azure/app-service-web/web-sites-enable-diagnostic-log#streamlogs
[0]: ./images/basic-web-app.png "Arquitectura de una aplicación web de Azure básica"
[1]: ./images/paas-basic-web-app-staging-slots.png "Intercambio de ranuras para implementaciones de producción y de almacenamiento profesional"
